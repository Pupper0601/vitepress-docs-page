import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.1b72a0e7.js";const F=JSON.parse('{"title":"十六、Mysql","description":"","frontmatter":{},"headers":[],"relativePath":"编程语言/02.Java基础/18.Mysql.md","lastUpdated":1700044566000}'),p={name:"编程语言/02.Java基础/18.Mysql.md"},e=l(`<h1 id="十六、mysql" tabindex="-1">十六、Mysql <a class="header-anchor" href="#十六、mysql" aria-label="Permalink to &quot;十六、Mysql&quot;">​</a></h1><h2 id="一、安装" tabindex="-1">一、安装 <a class="header-anchor" href="#一、安装" aria-label="Permalink to &quot;一、安装&quot;">​</a></h2><h3 id="_1-下载安装包-——-mysql-下载地址" tabindex="-1">1.下载安装包 —— <a href="https://www.mysql.com/downloads/" target="_blank" rel="noreferrer">MySQL 下载地址</a> <a class="header-anchor" href="#_1-下载安装包-——-mysql-下载地址" aria-label="Permalink to &quot;1.下载安装包 —— [MySQL 下载地址](https://www.mysql.com/downloads/)&quot;">​</a></h3><p><img src="https://img.pupper.cn/img/1655103907534-d3ceb445-4ad0-46f8-b63e-8c4d295c8bd6.png" alt=""></p><p><img src="https://img.pupper.cn/img/1655103908270-6e6472e1-1ca9-45a8-b3a1-bcba2c391284.png" alt=""></p><p><img src="https://img.pupper.cn/img/1655103907511-36cb4b95-dc4c-4cd0-8887-5a2ee03428b7.png" alt=""></p><h3 id="_2-安装-mysql-注意保存临时密码" tabindex="-1">2.安装 mysql（注意保存临时密码） <a class="header-anchor" href="#_2-安装-mysql-注意保存临时密码" aria-label="Permalink to &quot;2.安装 mysql（注意保存临时密码）&quot;">​</a></h3><p>双击 mysql-5.7.29-macos10.14-x86_64.dmg 文件，进行安装 <img src="https://img.pupper.cn/img/1655103907357-88559b7e-e2a4-43da-a654-c593a50f8f9f.png" alt=""></p><p><img src="https://img.pupper.cn/img/1655103911598-4f1f7423-ace2-456f-adff-d65ee9eac833.png" alt=""></p><p><img src="https://img.pupper.cn/img/1655103913068-f8744e06-3a9c-40ef-9bd8-7fa0350cd3f9.png" alt=""></p><p><img src="https://img.pupper.cn/img/1655103913166-93d7a437-d7f6-4bfe-96db-d854eb0beb94.png" alt=""></p><hr><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>下截图中有 MySQL 的 <strong>临时密码（ _Th5u1bh+t(( ）</strong> ，必须注意 下截图中有 MySQL 的 <strong>临时密码（ _Th5u1bh+t(( ）</strong> ，必须注意 下截图中有 MySQL 的 <strong>临时密码（ _Th5u1bh+t(( ）</strong> ，必须注意</p></div><p><img src="https://img.pupper.cn/img/1655106759696-f03fe7e0-4d45-45d3-bb6a-f0d0fbcecb3d.png" alt=""></p><hr><p><img src="https://img.pupper.cn/img/1655103913153-67bc4453-1f00-4dcd-9bba-50fcd1b88e74.png" alt=""><img src="https://img.pupper.cn/img/1655103913193-fc1922ab-bdcb-4a1f-9608-64755ec66af3.png" alt=""></p><h3 id="_3-启动-mysql" tabindex="-1">3. 启动 MySQL <a class="header-anchor" href="#_3-启动-mysql" aria-label="Permalink to &quot;3. 启动 MySQL&quot;">​</a></h3><p><img src="https://img.pupper.cn/img/1655103915570-8dd8efce-2d6f-459f-8d60-cc7a3d184a67.png" alt=""><img src="https://img.pupper.cn/img/1655103915857-978f676b-9c06-4f8b-b2ab-3f532f2b70d5.png" alt=""></p><h3 id="_4-修改账户密码" tabindex="-1">4. 修改账户密码 <a class="header-anchor" href="#_4-修改账户密码" aria-label="Permalink to &quot;4. 修改账户密码&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 启动完成后，打开终端，输入如下内容，然后按回车键</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">alias</span><span style="color:#A6ACCD;"> mysql</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">/usr/local/mysql/bin/mysql</span></span>
<span class="line"><span style="color:#C792EA;">alias</span><span style="color:#A6ACCD;"> mysqladmin</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">/usr/local/mysql/bin/mysqladmin</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>这两条命令是为了方便直接打开 iTerm 就可以运行 mysql 命令，而不是必须进入 mysql 安装目录才能运行。</p></div><p><img src="https://img.pupper.cn/img/1655105189149-7149dd6c-01e6-4dda-a3ef-4ce4c2209eea.png" alt=""></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 修改 root 的密码为 12345678</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">mysqladmin</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12345678</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-进入终端" tabindex="-1">5.进入终端 <a class="header-anchor" href="#_5-进入终端" aria-label="Permalink to &quot;5.进入终端&quot;">​</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 用户名为：root      密码为：12345678</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">h 主机名 </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">P 端口 </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u 用户名 </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p密码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u root </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p12345678</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>使用 quit 退出 MySQL net stop mysql 服务器名 停止服务 net start mysql 服务器名 启动服务</p></div><h2 id="二、数据库操作" tabindex="-1">二、数据库操作 <a class="header-anchor" href="#二、数据库操作" aria-label="Permalink to &quot;二、数据库操作&quot;">​</a></h2><h3 id="_1-数据库操作" tabindex="-1">1. 数据库操作 <a class="header-anchor" href="#_1-数据库操作" aria-label="Permalink to &quot;1. 数据库操作&quot;">​</a></h3><h4 id="_1-创建数据库" tabindex="-1">1. 创建数据库 <a class="header-anchor" href="#_1-创建数据库" aria-label="Permalink to &quot;1. 创建数据库&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 创建数据库语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> [IF NOT EXISTS] 数据库名 </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> 字符集 </span><span style="color:#C792EA;">COLLATE</span><span style="color:#A6ACCD;"> 校对规则;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>:::note</p><ul><li>CHARACTER SET : 指定数据库采用的字符集，默认为 utf8;</li><li>COLLATE : 指定数据库字符集的校对规则 <ul><li>默认为 utf8_general_ci （不区分大小写）；</li><li>utf8_bin （区分大小写）； :::</li></ul></li></ul><h4 id="_2-查看及删除数据库" tabindex="-1">2. 查看及删除数据库 <a class="header-anchor" href="#_2-查看及删除数据库" aria-label="Permalink to &quot;2. 查看及删除数据库&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 查看、删除数据库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示数据库语句：</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW DATABASHES</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示数据库创建语句：</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> db_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除数据库语句：</span></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> [IF EXISTS] db_name</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建数据库</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">db_01</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> utf8 </span><span style="color:#C792EA;">COLLATE</span><span style="color:#A6ACCD;"> utf8_bin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查看所有的数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW DATABASES;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查看数据库；</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> db_01;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除数据库</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> db_01;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_3-备份及恢复数据库" tabindex="-1">3.备份及恢复数据库 <a class="header-anchor" href="#_3-备份及恢复数据库" aria-label="Permalink to &quot;3.备份及恢复数据库&quot;">​</a></h4><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 备份数据库 - dos 中执行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">用户名</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-B</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">数据库</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">数据库</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">数据库</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">备份某几个表</span></span>
<span class="line"><span style="color:#FFCB6B;">mysqldump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">用户名</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">数据库</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">表</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">表</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">表</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">n</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">文件名.sql</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 恢复数据库 - sql 中执行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Source 文件名.sql</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-表" tabindex="-1">2. 表 <a class="header-anchor" href="#_2-表" aria-label="Permalink to &quot;2. 表&quot;">​</a></h3><h4 id="_1-创建表" tabindex="-1">1. 创建表 <a class="header-anchor" href="#_1-创建表" aria-label="Permalink to &quot;1. 创建表&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 表创建语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">表名</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  字段1  类型,字段2  类型。。。</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> 字符集 </span><span style="color:#C792EA;">collate</span><span style="color:#A6ACCD;"> 校对规则 engine 引擎</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>character set：如不指定，则默认使用数据库字符集； collate： 如不指定，则默认使用数据库校对规则； engine： 引擎</p></div><h4 id="_2-mysql-的数据类型" tabindex="-1">2. MySQL 的数据类型 <a class="header-anchor" href="#_2-mysql-的数据类型" aria-label="Permalink to &quot;2. MySQL 的数据类型&quot;">​</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在创建字段类型时,如果没有添加 unsinged 关键字,则表示该类型是有符号的;</p></div><p><img src="https://img.pupper.cn/img/1655188958652-67fbde81-8dd1-4b32-a6ab-e40c07129820.jpeg" alt=""></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- unsinged  的使用</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建字段 使用 unsigend 表示不带符号,大小从 0 开始</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">usr</span><span style="color:#A6ACCD;"> (id </span><span style="color:#F78C6C;">tinyint</span><span style="color:#A6ACCD;"> UNSIGNED);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加数据</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> usr </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询数据</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> usr </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>:::note 小数类型:</p><ul><li>float / double [unsigend] <ul><li>float : 单精度</li><li>double : 双精度</li></ul></li><li>decimal [M,D] [unsigend] : 可以支持更加精确的小数位 <ul><li>M : 小数位数(精度)的总数; <ul><li>M 最大 65;</li><li>如果 M 被省略, 则默认为 10;</li></ul></li><li>D : 小数点后面的位数; - 如果 D 是 0, 则值没有小数点; - D 最大为 30; - 如果 D 被省略, 则默认为 0 :::</li></ul></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 小数 使用 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">b1</span><span style="color:#A6ACCD;"> (num1 </span><span style="color:#F78C6C;">float</span><span style="color:#A6ACCD;">, num2 double, num3 </span><span style="color:#C792EA;">decimal</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> b1 </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">12313123</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">99</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">23423424234234</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">12312</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">12312313123</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> b1;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>字符串类型:</p><ul><li>char(4) : 这个 4 表示字符数 (最大 255), 不是字节数,不管是中文还是字母都是放 4 个, 按字符计算; <ul><li>固定长度, 不论存放几个字符, 都会分配 4 个字符的空间;</li><li>主要用于存放固定长度的内容, 如 手机号, 身份证等;</li></ul></li><li>varchar(4) : 这个 4 表示字符数,不管是字母还是中文都一定义好的表编码来存储; <ul><li>可变长度, 当实际数据不足 4 个字符时,按实际长度分配空间;</li><li>varchar 本身需要 1~3 个字节的空间来存放字符长度, 因此 varchar 最大存放空间为 65532 个字节; :::</li></ul></li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 日期类型, 时间戳</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">create table 表名 </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">字段名 timestamp</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">NOT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">NULL</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">NO</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">UPDATE</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>NOT NULL DEFAULT CURRENT_TIMESTAMP NO UPDATE CURRENT_TIMESTAMP : 表示不为空, 并且以当前服务器时间进行更新;</p></div></div><h4 id="_3-修改表" tabindex="-1">3. 修改表 <a class="header-anchor" href="#_3-修改表" aria-label="Permalink to &quot;3. 修改表&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查看表</span></span>
<span class="line"><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;"> 表名;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除表</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改表名</span></span>
<span class="line"><span style="color:#A6ACCD;">rename </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> 新表名;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改字符集</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> 字符集;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加字段</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> 字段名 字段类型 ;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改字段</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> 字段名 字段类型;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除字段</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> 字段名;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="案例" tabindex="-1">案例 <a class="header-anchor" href="#案例" aria-label="Permalink to &quot;案例&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 表 及 字段的增删改</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emp</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">sex</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CHAR</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">brithday</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">date</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">entry_date</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">datetime</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">job</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">salary</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> double,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">resume</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">text</span></span>
<span class="line"><span style="color:#A6ACCD;">) CHARSET utf8 </span><span style="color:#C792EA;">collate</span><span style="color:#A6ACCD;"> utf8_bin engine innodb;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加数据</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">小旋风</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">男</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2022-1-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2022-3-3 5:20:32</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">巡山</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">大王叫我来巡山</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加字段</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- not null default &#39;&#39; : 不能为空, 默认值为 &#39;&#39; 空字符串</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- after resume : 添加在 resume 字段后面</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">image</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">after</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">resume</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改字段, 并且不能为空</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">modify</span><span style="color:#A6ACCD;"> job </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除字段</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> sex;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改表名</span></span>
<span class="line"><span style="color:#A6ACCD;">rename </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> employee;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改表的字符集</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> employee </span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改字段名</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> employee change </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> user_name </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> employee;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="三-数据的-增-删-改" tabindex="-1">三.数据的 增, 删, 改 <a class="header-anchor" href="#三-数据的-增-删-改" aria-label="Permalink to &quot;三.数据的 增, 删, 改&quot;">​</a></h2><h3 id="_1-增" tabindex="-1">1. 增 <a class="header-anchor" href="#_1-增" aria-label="Permalink to &quot;1. 增&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">inset </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (字段值,字段值...)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">inset </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> 表名(字段,字段...) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (字段值,字段值...)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>注意事项:</p><ul><li>数据类型需要一致;</li><li>数据长度需要在规定范围;</li><li>字符 和 日期类型 数据需要放在 单引号 中;</li><li>values 中的值需要与表名后的字段名顺序一致; <ul><li>如果表名后没有字段名, 则需要与表中的字段名顺序一致;</li></ul></li><li>如果字段运行为空, 则可以插入 null;</li><li>inset into 表名 values (), () : 可以一次插入多条数据;</li><li>如果某个字段不给值, 则会使用默认值; <ul><li>如果没有默认值, 则会报错; :::</li></ul></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 添加数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> \`</span><span style="color:#82AAFF;">phone</span><span style="color:#A6ACCD;">\`(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">), </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">price</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> double);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> phone </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">华为</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> phone(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">price</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">苹果</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">5000</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">小米</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 字段可以为空时,实际值可以不写</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> phone </span><span style="color:#F78C6C;">values</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-改" tabindex="-1">2.改 <a class="header-anchor" href="#_2-改" aria-label="Permalink to &quot;2.改&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> 字段</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值,字段</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> 字段</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>如果 update 语句后 没有 where 语句, 则默认为 修改所有数据 ;</li></ul></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 修改数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> salary </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5000</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> salary </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2000</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> user_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张三</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-删" tabindex="-1">3.删 <a class="header-anchor" href="#_3-删" aria-label="Permalink to &quot;3.删&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>如果 delete 语句后 没有 where 语句, 则默认为 删除所有数据 ;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 删除数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> user_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">李四</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-表复制-蠕虫复制" tabindex="-1">4.表复制 (蠕虫复制) <a class="header-anchor" href="#_4-表复制-蠕虫复制" aria-label="Permalink to &quot;4.表复制 (蠕虫复制)&quot;">​</a></h3><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>表复制(蠕虫复制) : 主要用于获得大量的测试数据, 谨慎使用</p><ul><li>数据都是重复的</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 将 emp 查询的数据 逐条添加到 test01 表中</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test01 (id, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, sal, job, deptno) </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> empno, ename, sal, job, deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 表数据的自我复制 (每次运行都会 将自己的每一条数据都复制一次)</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test01 </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test01;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-去除表中-重复的数据" tabindex="-1">5. 去除表中 重复的数据 <a class="header-anchor" href="#_5-去除表中-重复的数据" aria-label="Permalink to &quot;5. 去除表中 重复的数据&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>create table new_table like old_table : 复制表结构</p></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 去除表中重复的数据</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 复制 表 结构 创建临时表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">table_tmp</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> test01;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 将原表中的数据去重 写入 临时表</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> table_tmp </span><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test01;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 清除 原表中的数据</span></span>
<span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test01;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 将 临时表中的数据 写入 原表中</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test01 </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> table_tmp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除 临时表</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> table_tmp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test01;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="四-数据库-查询-基础" tabindex="-1">四.数据库 查询 - 基础 <a class="header-anchor" href="#四-数据库-查询-基础" aria-label="Permalink to &quot;四.数据库 查询 - 基础&quot;">​</a></h2><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 基本语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> [distinct]</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">| 列名 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 字段取别名</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 字段名 </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 别名 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>:::note</p><ul><li>select : 指定查询哪些列的数据;</li><li>distinct : 可选参数, 指显示结果时, 去除重复的数据; :::</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 去重 求和 - 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">student</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">), </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">float</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">float</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">float</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">韩信</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">89</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">78</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">张飞</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">67</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">98</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">56</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">宋江</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">87</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">78</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">77</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">关羽</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">98</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">赵云</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">82</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">84</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">67</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">欧阳锋</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">55</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">85</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">45</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">黄蓉</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">75</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">65</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 对结果去重</span></span>
<span class="line"><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> english </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 对所有成绩求和</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,(chinese </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> english </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> math) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> sum </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_1-where-子句中的运算符" tabindex="-1">1. where 子句中的运算符 <a class="header-anchor" href="#_1-where-子句中的运算符" aria-label="Permalink to &quot;1. where 子句中的运算符&quot;">​</a></h3><table><thead><tr><th>比较运算符</th><th>&lt; &lt;= &gt; &gt;= !=</th><th></th></tr></thead><tbody><tr><td></td><td>between ... and...</td><td>显示在某一区间的值, 闭区间</td></tr><tr><td></td><td>in(set)</td><td>显示在 in 列表中的值,如 in(10,20)</td></tr><tr><td></td><td>like 或 not like</td><td>模糊查询</td></tr><tr><td></td><td>is null</td><td>判断是否为空</td></tr><tr><td>逻辑运算符</td><td>and</td><td>多个条件同时成立</td></tr><tr><td></td><td>or</td><td>多个条件任一成立</td></tr><tr><td></td><td>not</td><td>不成立</td></tr></tbody></table><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询赵云的成绩</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">赵云</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 英语成绩大于 90 分的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 数学大于 60 分并且 ID 大于 4</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 总分大于 200 分, 并且数学成绩小于语文成绩,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 赵% : 表示以赵开头的人</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">赵%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 查询英语成绩大于语文成绩的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 英语分数在 89 ~ 90 之间的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 数学分数在 89, 90, 91 的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">89</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">91</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 所有姓李的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">关%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 数学比语文少 30 分的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">Chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_2-排序-order-by" tabindex="-1">2. 排序 - order...by... <a class="header-anchor" href="#_2-排序-order-by" aria-label="Permalink to &quot;2. 排序 - order...by...&quot;">​</a></h3><blockquote><p>order by : 指定排序的字段, 字段既可以是表中的, 也可以是 select 语句后指定的</p></blockquote><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 列名 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件 </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> 排序条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>注意事项:</p><ul><li>默认排序为 升序 asc , <ul><li>desc 为降序</li></ul></li><li>order by 子句一般位于 select 语句的结尾;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">韩非子</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">45</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">65</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">99</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 对数学成绩排序 升序</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 按总分 从高到底输出</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, (</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> total_score </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> total_score </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-统计函数" tabindex="-1">3.统计函数 <a class="header-anchor" href="#_3-统计函数" aria-label="Permalink to &quot;3.统计函数&quot;">​</a></h3><p>数据库 - 数据 <a href="https://wwi.lanzoup.com/iJj3T09dte6h" target="_blank" rel="noreferrer">雇员系统表.txt</a></p><h4 id="_1-统计函数-count" tabindex="-1">1. 统计函数 - count <a class="header-anchor" href="#_1-统计函数-count" aria-label="Permalink to &quot;1. 统计函数 - count&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>count(*) : 返回满足条件的记录的行数;</li><li>count(字段) : 返回满足条件的列的数量, 但是会排除值为 null 的行</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 一共有多少个学生</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(id) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 数学成绩大于 90 的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> num </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 总分大于 250 的</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> num </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">250</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_2-求和函数-sum" tabindex="-1">2. 求和函数 - sum <a class="header-anchor" href="#_2-求和函数-sum" aria-label="Permalink to &quot;2. 求和函数 - sum&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(字段) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>sum 仅对数值起作用, 否则会报错;</li><li>多列就和时, 需要用 逗号 隔开</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 数学总成绩</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 各科成绩</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">), </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">),</span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 所有成绩的总和</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 语文的平均分</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_3-求平均值-avg" tabindex="-1">3. 求平均值 - avg <a class="header-anchor" href="#_3-求平均值-avg" aria-label="Permalink to &quot;3. 求平均值 - avg&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(列名) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 求数学成绩的平均值</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 求班级总分的平均值</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_4-求最大-最小值-max-min" tabindex="-1">4. 求最大, 最小值 - Max , Min <a class="header-anchor" href="#_4-求最大-最小值-max-min" aria-label="Permalink to &quot;4. 求最大, 最小值 - Max , Min&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(列名) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 求数学成绩的最高分</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 求班级的最低分</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">chinese</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">english</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">math</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_5-分组-group-by" tabindex="-1">5. 分组 - group by <a class="header-anchor" href="#_5-分组-group-by" aria-label="Permalink to &quot;5. 分组 - group by&quot;">​</a></h4><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 语法</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 字段 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件 </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> 分组条件;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 字段 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> 查询条件 </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> 分组条件 </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> 过滤条件;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>group by : 用于对查询的结果分组统计;</li><li>having 子句用于限制分组显示结果;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comn, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 每个部门的平均工资 和 最高工资</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal), </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(sal), deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 每个部门的 每个岗位 的平均工资 和 最低工资</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno, job, </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal), </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno, job;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 平均工资 低于 2000 的部门号和平均工资</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno, </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> avg_sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> avg_sal </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2000</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-字符串函数" tabindex="-1">4.字符串函数 <a class="header-anchor" href="#_4-字符串函数" aria-label="Permalink to &quot;4.字符串函数&quot;">​</a></h3><p>:::note dual: 亚元表, 系统表, 可以作为测试表来使用 :::</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>charset(str)</td><td>返回字符串 的字符集</td></tr><tr><td>concat(str1, str2...)</td><td>拼接 字符串</td></tr><tr><td>instr(str, substr)</td><td>返回 substr 在 str 中出现的位置,没有返回 0</td></tr><tr><td>lcase(str)</td><td>转换成小写</td></tr><tr><td>left(str, length)</td><td>从 str 中的左边起, 取 length 个字符</td></tr><tr><td>length(str)</td><td>str 长度 [按照字节]</td></tr><tr><td>ltrim(str), rtrim(str)</td><td>去除前端空格 或 后端空格</td></tr><tr><td>replace(str, search_str, replacce_str)</td><td>在 str 中用 replace_str 替换 search_str</td></tr><tr><td>strcmp(str1, str2)</td><td>逐字比较两个字符串大小,str1 大,返回 1,小则返回-1,相等返回 0</td></tr><tr><td>substring(str, position)</td><td>从 str 的 position 开始 [从 1 开始计算 ], 取 length 个字符</td></tr><tr><td>trim</td><td>去除 前后空格</td></tr><tr><td>ucase(str)</td><td>转换成大写</td></tr></tbody></table><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comn, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- charset(str)	返回字符串 的字符集</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> charset(ename) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;		</span><span style="color:#676E95;font-style:italic;">-- utf8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- concat(str1, str2...)	拼接 字符串</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(ename,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,job) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp; </span><span style="color:#676E95;font-style:italic;">-- SMITH_CLERK</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- instr(str, substr)	返回 substr 在 str 中出现的位置,没有返回 0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- dual: 亚元表, 系统表, 可以作为测试表来使用</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> instr(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">阳</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> student </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">欧阳锋</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- ucase(str)	转换成大写</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ucase(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- lcase(str)	转换成小写</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> lcase(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- left(str, length)	从 str 中的左边起, 取 length 个字符</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, </span><span style="color:#82AAFF;">left</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 从右边取</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, </span><span style="color:#82AAFF;">right</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- length(str)	str 长度 [按照字节]</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> job,</span><span style="color:#F78C6C;">length</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">job</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- replace(str, search_str, replacce_str)	在 str 中用 replace_str 替换 search_str</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> job,</span><span style="color:#82AAFF;">replace</span><span style="color:#A6ACCD;">(job, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">经理</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- strcmp(str, str)	逐字比较两个字符串大小</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> strcmp(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pupper</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">oupper</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- substring(str, position)	从 str 的 position 开始 [从 1 开始计算 ], 取 length 个字符</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">substring</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pupper</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;		</span><span style="color:#676E95;font-style:italic;">-- upper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- ltrim(str),  rtrim(str)	去除前端空格 或 后端空格</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- trim	去除 前后空格</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ltrim</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">      pupper      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rtrim</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">      pupper      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">trim</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">      pupper      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 以首字母小写的方式显示所有员工的姓名</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(lcase(</span><span style="color:#82AAFF;">left</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)),</span><span style="color:#82AAFF;">substring</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_5-数学函数" tabindex="-1">5. 数学函数 <a class="header-anchor" href="#_5-数学函数" aria-label="Permalink to &quot;5. 数学函数&quot;">​</a></h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>abs(num)</td><td>绝对值</td></tr><tr><td>bin(decimal_number)</td><td>十进制 转 二进制</td></tr><tr><td>ceiling(num)</td><td>向上取整 , 得到比 num 大的最小整数</td></tr><tr><td>conv(num, from_base, to_base)</td><td>进制转换, 从 from_base 进制 转为 to_base 进制</td></tr><tr><td>floor(num)</td><td>向下取整, 得到比 num 小的最大整数</td></tr><tr><td>format(num, decimal_places)</td><td>保留小数位数, 四舍五入</td></tr><tr><td>hex(decimalNumber)</td><td>转 16 进制</td></tr><tr><td>least(number1,number2)</td><td>求最小值</td></tr><tr><td>mod(numerator, denominator)</td><td>求余数</td></tr><tr><td>rand([seed])</td><td>随机数, 其范围为 0 ≤ v ≤1.0, 如果使用 seed, 则 seed 不变, 随机数不变</td></tr></tbody></table><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- abs(num)	绝对值</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">abs</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- bin(decimal_number)	十进制 转 二进制</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> bin(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- ceiling(num)	向上取整 , 得到比 num 大的最小整数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ceiling</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">01</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- conv(num, from_base, to_base)	进制转换</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 8 为 10 进制, 转为 2 进制</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> conv(</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> ,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- floor(num)	向下取整, 得到比 num 小的最大整数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">floor</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- format(num, decimal_places)	保留小数位数, 四舍五入</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">format</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">1415926634</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- hex(decimalNumber)	转 16 进制</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> hex(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- least(number1,number2)	求最小值</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">least</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1341123</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">213443242</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- mod(numerator, denominator)	求余数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> mod(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- rand([seed])	随机数, 其范围为 0 ≤ v ≤1.0</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rand</span><span style="color:#A6ACCD;">() </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 如果 seed 填写了, 在 seed 不变时,产生的 随机数不变</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rand</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_6-时间日期函数" tabindex="-1">6. 时间日期函数 <a class="header-anchor" href="#_6-时间日期函数" aria-label="Permalink to &quot;6. 时间日期函数&quot;">​</a></h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>current_date()</td><td>获取当前日期</td></tr><tr><td>current_time()</td><td>获取当前时间</td></tr><tr><td>current_timestamp()</td><td>获取当前时间( 日期 + 时间)</td></tr><tr><td>date(datetime)</td><td>返回 datetime 的日期部分</td></tr><tr><td>date_add(date, interval d_value d_type)</td><td>在 date 中加上日期 或 时间</td></tr><tr><td>date_sub(date, interval d_value d_type)</td><td>在 date 中减去日期 或 时间</td></tr><tr><td>datediff(date1, date2)</td><td>两个日期差(天数), date1 - date2</td></tr><tr><td>timediff(date1, date2)</td><td>两个时间差(时分秒), date1 - date2</td></tr><tr><td>now()</td><td>当前时间</td></tr><tr><td>year|month|date(datetime)</td><td>获取具体的年, 月, 日</td></tr><tr><td>from_unixtime()</td><td>将 时间戳 转换为 指定格式的 日期</td></tr><tr><td>unix_timestamp()</td><td>返回 1970-1-1 到现在的 秒数</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>date_add() 中的 interval 后面可以是 year, minute, second, day 等</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mes</span><span style="color:#A6ACCD;">(id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, content </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">), send_time </span><span style="color:#F78C6C;">datetime</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> mes </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">北京新闻</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">current_timestamp</span><span style="color:#A6ACCD;">()),(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">上海新闻</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">广州新闻</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- current_date()	当前日期</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> current_date</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- current_time()	当前时间</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">current_time</span><span style="color:#A6ACCD;">() </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- current_timestamp()	当前时间戳</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">current_timestamp</span><span style="color:#A6ACCD;">() </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- date(datetime)	返回 datetime 的日期部分</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">date</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">hiredate</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示发布日期,不显示时间</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id, content, </span><span style="color:#C792EA;">date</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">send_time</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> mes;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询在 10 分钟内发布的新闻</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> mes </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> date_add(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">send_time</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, interval </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">minute</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> mes </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> send_time </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> date_sub(</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, interval </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">minute</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 计算 2011-11-11 和 1990-1-1 相差的天数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">datediff</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2011-11-11</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1990-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 计算活了多少点</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">datediff</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1989-11-22</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 计算 活到 80 岁还剩多少天</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">datediff</span><span style="color:#A6ACCD;">(date_add(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1989-11-22</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, interval </span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">year</span><span style="color:#A6ACCD;">), </span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- timediff(date1, date2)	两个时间差(时分秒)</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> timediff(</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2022-06-15 09:17:18</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- year|month|date(datetime)</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">year</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- unix_timestamp() 返回 1970-1-1 到现在的 秒数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> unix_timestamp</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- from_unixtime() 将 时间戳 转换为 指定格式的 日期</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> from_unixtime(</span><span style="color:#F78C6C;">1655285874</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> from_unixtime(</span><span style="color:#F78C6C;">1655285874</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%Y-%m-%d</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> from_unixtime(</span><span style="color:#F78C6C;">1655285874</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%Y-%m-%d %H:%i:%s</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dual;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_7-加密和系统函数" tabindex="-1">7. 加密和系统函数 <a class="header-anchor" href="#_7-加密和系统函数" aria-label="Permalink to &quot;7. 加密和系统函数&quot;">​</a></h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>user()</td><td>查询用户</td></tr><tr><td>database()</td><td>数据库名称</td></tr><tr><td>md5(str)</td><td>为字符串加密 MD5 32 位</td></tr><tr><td>password(str)</td><td>MySQL 默认的密码加密方式</td></tr></tbody></table><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- user()	查询用户</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- dtabase()	数据库名称</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- md5(str)	为字符串加密 MD5 32 位</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> md5(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pupper</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- b24fb9e5effed88af6c2590b9a7ab9a4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- password(str)	用于对 MySQL 数据库的用户密码加密</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pupper</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- *6EF8B45E1D589DB302041535A61774C1294D54D7</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_8-流程控制函数" tabindex="-1">8. 流程控制函数 <a class="header-anchor" href="#_8-流程控制函数" aria-label="Permalink to &quot;8. 流程控制函数&quot;">​</a></h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>if(expr1,expr2,expr3)</td><td>如果 expr1 为 true, 则返回 expr2, 否则返回 expr3</td></tr><tr><td>ifnull(expr1,expr2)</td><td>如果 expr1 不为 null, 则返回 expr1 , 否则返回 expr2</td></tr><tr><td>select case when expr1 then expr2 when expr3 then expr4 else expr5 end;</td><td>如果 expr1 为 true, 则返回 expr2, 如果 expr3 为 true, 则返回 expr4, 否则返回 expr5</td></tr></tbody></table><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- if(expr1,expr2,expr3)	如果 expr1 为 true, 则返回 expr2, 否则返回 expr3</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">if</span><span style="color:#A6ACCD;">(true, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">北京</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">杭州</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);		</span><span style="color:#676E95;font-style:italic;">-- 北京</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- ifnull(expr1,expr2)	 如果 expr1 不为 null, 则返回 expr1 , 否则返回 expr2</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ifnull</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">杭州</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);			</span><span style="color:#676E95;font-style:italic;">-- 杭州</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- select case when expr1 then expr2 when expr3 then expr4 else expr5 end;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 如果 expr1 为 true, 则返回 expr2, 如果 expr3 为 true, 则返回 expr4, 否则返回 expr5</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条件 1 成立</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">条件二成立</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">都不成立</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;">;		</span><span style="color:#676E95;font-style:italic;">-- 都不成立</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 如果 comm 为null, 则显示 0.0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 判断是否为 null, 要使用 is null, 不为空 is not null</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename,</span><span style="color:#F78C6C;">if</span><span style="color:#A6ACCD;">(comm </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">, comm) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename,</span><span style="color:#F78C6C;">ifnull</span><span style="color:#A6ACCD;">(comm, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 如果 emp 表的 job 是 clerk 则显示为 职员, 如果是 manager 则显示为 经理, 如果是 salesman 则显示 销售, 其他正常显示</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CLERK</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">职员</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">经理</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SALESMAN</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">销售</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">else</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> job</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_9-分页查询" tabindex="-1">9.分页查询 <a class="header-anchor" href="#_9-分页查询" aria-label="Permalink to &quot;9.分页查询&quot;">​</a></h3><p>:::note 语法: select ... limit start, rows; 公式: <strong>limit 每页显示的记录数 * (第几页-1), 每页显示的记录数</strong></p><p>表示从 start + 1 行开始取, 取出 rows 行, start 从 0 开始计算 :::</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 按照 员工 ID 升序取出, 每页显示 3 条数据</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- limit 每页显示的记录数 * (第几页-1), 每页显示的记录数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> empno </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> ;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> empno </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> ;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> empno </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> ;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示每种岗位的员工总数和平均工资</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> job,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(empno), </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> job;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示员工总数 和 获得补助的员工数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">), </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(comm) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示管理者的人数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">distinct</span><span style="color:#A6ACCD;"> mgr) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示员工工资的最大差额</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(sal)</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(sal)) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="五-数据库-查询-进阶" tabindex="-1">五.数据库 查询 - 进阶 <a class="header-anchor" href="#五-数据库-查询-进阶" aria-label="Permalink to &quot;五.数据库 查询 - 进阶&quot;">​</a></h2><h3 id="_1-单表查询" tabindex="-1">1. 单表查询 <a class="header-anchor" href="#_1-单表查询" aria-label="Permalink to &quot;1. 单表查询&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果 select 语句中同时包含 group by, having, limit, order by , 那么他们的顺序为 group by, having, order by, limit;</p></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> column1, column2, column3 ... </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> column</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> condition</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> column</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">start</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">rows</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 统计 各个部门平均工资且大于 1000 且从高到低排序 且显示 2 行</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno,</span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> avg_sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> avg_sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> avg_sal </span><span style="color:#F78C6C;">desc</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>like 操作符:</p><ul><li>% : 表示 0 ~ 多个字符</li><li>_ : 表示单个字符</li></ul><p>desc 表名 : 用于查询表结构</p></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 1992-1-1 之后入职的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> hiredate </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1992-1-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 姓名首字母为 S 的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">S%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 姓名 第三个字母为 O 的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__O%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 表结构</span></span>
<span class="line"><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 按照工资从低到高显示员工信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> sal;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 按照 部门编号的升序 工资的降序 显示员工工资</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">asc</span><span style="color:#A6ACCD;">, sal </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_2-多表查询" tabindex="-1">2. 多表查询 <a class="header-anchor" href="#_2-多表查询" aria-label="Permalink to &quot;2. 多表查询&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>笛卡尔集 : 多表查询时, 表 1 中的每一条内容都会和表 2 中的每一条内容组合, 从而形成笛卡尔集; 为了防止出现 笛卡尔集, 查询 条件不能少于 <strong>表的个数 -1</strong>;</p></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 员工的名字,工资,部门名称,并按部门编号降序排列</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;">  ename, sal, dname, dept.deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept, emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 部门号为 10 的 员工名字,工资,部门名称</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;">  dept.deptno, dname, ename, sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept, emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询各个员工的名字, 工资, 及工资级别</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal, grade </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp, salgrade </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> losal </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> hisal </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> sal;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal, grade </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp, salgrade </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> losal </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> hisal;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_3-自连接" tabindex="-1">3.自连接 <a class="header-anchor" href="#_3-自连接" aria-label="Permalink to &quot;3.自连接&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>注意事项:</p><ul><li>把同一张表当做两张表来使用;</li><li>需要给 表 取别名, <ul><li>表 别名 : 表取别名时, as 可以忽略不写</li></ul></li><li>字段前必须加 表 的别名, 用于区分, 否则报错;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 显示员工名字和 上级的名字</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> worker.ename, boss.ename </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp worker, emp boss </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> worker.mgr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> boss.empno;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-子查询" tabindex="-1">4.子查询 <a class="header-anchor" href="#_4-子查询" aria-label="Permalink to &quot;4.子查询&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>子查询中, 返回单行数据时,一般用 = 判断条件; <ul><li>返回 多行数据时, 使用 in 作为判断条件, 也就是满足 in 中的任意条件即可;</li></ul></li><li>子查询中, 也可以将一个查询结果当做临时表来用;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 案例 - 雇员数据库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 返回单行 子查询</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 SMITH 同一部门的其他员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SMITH</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 返回多行 子查询</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--  查询 和部门10 工作相同的员工信息,但是不包含 10 号部门的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="all-和-any" tabindex="-1">all 和 any <a class="header-anchor" href="#all-和-any" aria-label="Permalink to &quot;all 和 any&quot;">​</a></h4><p>:::note all : 表示所有的 any : 表示每一个 :::</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 工资比 30 号部门所有员工工资高的员工信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> all(</span><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> all(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 工资比 30 号部门其中一个员工工资高的员工信息</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> any(</span><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> any(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-多列子查询" tabindex="-1">5.多列子查询 <a class="header-anchor" href="#_5-多列子查询" aria-label="Permalink to &quot;5.多列子查询&quot;">​</a></h3><p>:::note 语法: (字段 1, 字段 2...) = (select 字段 1, 字段 2 ... from...) :::</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 与 ALLEN 部门和岗位完全相同的所有员工,不含其本人</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (deptno, job) </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno, job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ALLEN</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> ename </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ALLEN</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 每个部门工资高于部门平均工资的个人资料</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> empno, ename, job, mgr</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp, (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno, </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> avg_sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno) temps</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> temps.deptno </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> avg_sal;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询 每个部门工资最高的员工资料</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> empno, ename, job, mgr</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp, (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno, </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> max_sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno) temps</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> temps.deptno </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> max_sal;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;font-style:italic;">-- 查询每个部门的 名称, 编号, 地址 和人员数量</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> dept.deptno, dname, loc, com</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept,(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(empno) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> com </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno) num</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> num.deptno;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_6-合并查询" tabindex="-1">6. 合并查询 <a class="header-anchor" href="#_6-合并查询" aria-label="Permalink to &quot;6. 合并查询&quot;">​</a></h3><p>:::note union all : 该操作符用于获得两个查询结果的 并集, 该操作符 不会去重; union : 该操作符可以 去重; :::</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal, job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2500</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">union all</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal, job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-外连接" tabindex="-1">7. 外连接 <a class="header-anchor" href="#_7-外连接" aria-label="Permalink to &quot;7. 外连接&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>外连接:</p><ul><li>左外连接 : 以左边的表为基准, 全部显示, 右边的表只显示与之匹配的部分; <ul><li>语法:** select ... from 表 1 left join 表 2 on 关联条件**</li><li>表 1 为主表, 表 2 为辅表</li></ul></li><li>右外连接 : 以右边的表为基准, 全部显示, 左边的表只显示与之匹配的部分; <ul><li>语法:** select ... from 表 1 right join 表 2 on 关联条件**</li><li>表 2 为主表, 表 1 为辅表 :::</li></ul></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stu</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> stu </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">kity</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">nono</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> stu;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">exam</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, grade </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> exam </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">56</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">76</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> exam;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 左外连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, stu.id, grade </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> stu </span><span style="color:#F78C6C;">left join</span><span style="color:#A6ACCD;"> exam </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> stu.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> exam.id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 右外连接</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">, stu.id, grade </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> stu </span><span style="color:#F78C6C;">right join</span><span style="color:#A6ACCD;"> exam </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> stu.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> exam.id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 列出所有部门及其员工,包括没有员工的部门</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> dname,ename, job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">left join</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> dname ;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_8-主键" tabindex="-1">8. 主键 <a class="header-anchor" href="#_8-主键" aria-label="Permalink to &quot;8. 主键&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>主键 : <strong>不可重复</strong>, 唯一标识, 用于标示 表中的 行数据 <ul><li>一张表只能有一主键, 但是可以使用复合主键;</li><li>主键不能为 null</li><li>一般使用 id, 手机号, 邮箱 作为主键 :::</li></ul></li></ul><p>:::note 语法: <strong>字段名 字段类型 primary key</strong>; -- 创建表时使用 <strong>primary key (列名)</strong>; -- 创建表后使用</p></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 创建表时指定 主键</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test02</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建表之后 指定主键</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test03</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">), </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> (id));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 复合主键</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test04</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">), </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> (id, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_9-非空-not-null-及-唯一-unique" tabindex="-1">9. 非空(not null) 及 唯一(unique) <a class="header-anchor" href="#_9-非空-not-null-及-唯一-unique" aria-label="Permalink to &quot;9. 非空(not null) 及 唯一(unique)&quot;">​</a></h3><p>:::note</p><ul><li>not null : 非空, 即 插入数据时, 必须为字段提供数据;</li><li>unique : 唯一, 表示该字段中的数据不能重复; <ul><li>如果没有指定 not null , 则 unique 字段 可以有多个 null</li><li>一张表可以有多个 unique 字段 :::</li></ul></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 非空</span></span>
<span class="line"><span style="color:#A6ACCD;">字段名 字段类型 </span><span style="color:#F78C6C;">not null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 唯一</span></span>
<span class="line"><span style="color:#A6ACCD;">字段名 字段类型 </span><span style="color:#F78C6C;">unique</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 创建表时指定 字段数据唯一并且非空</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test06</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">), </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">add</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_10-外键" tabindex="-1">10. 外键 <a class="header-anchor" href="#_10-外键" aria-label="Permalink to &quot;10. 外键&quot;">​</a></h3><p>:::note 外键 : 用于定义主表 和 从表 之间的关系 :::</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>注意事项:</p><ul><li>外键指向的表的字段, 要求是 primary key 或者是 unique;</li><li>表的类型 是 innodb, 否则不支持外键;</li><li>外键字段的类型要和主键字段的类型一致;</li><li>外键字段的值, 必须在主键中出现过, 或者为 null;</li><li>一旦建立了主外键关系,数据不能随意删除;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (从表字段名) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> 主表名(主键名 或 </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> 字段名)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 创建主表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">my_class</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建从表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">my_stu</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	class_id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">-- 创建外键</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (class_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> my_class (id));</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> my_class </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">java</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">web</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> my_stu </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">money</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">),(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tank</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> my_class;</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> my_stu;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_11-自增长" tabindex="-1">11. 自增长 <a class="header-anchor" href="#_11-自增长" aria-label="Permalink to &quot;11. 自增长&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">字段名 整型 </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> auto_increment</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 自增长 字段赋值 null 时, 默认从 1 开始自增长</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> xxx (字段1, 字段2...) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">, 值2...);</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> xxx (字段2...) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (值1, 值2...);</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> xxx </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">, 值2...);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>注意事项:</p><ul><li>自增长 一般与主键配合使用;</li><li>自增长单独使用时, 需要配合 unique;</li><li>自增长 修饰的字段 一般为整型;</li><li>自增长一般从 1 开始, 也可以通过命令修改 <ul><li>alter table 表名 auto_increment = 新的开始值; :::</li></ul></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 自增长 - 案例</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建 表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test05</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">	id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> auto_increment,</span></span>
<span class="line"><span style="color:#A6ACCD;">	email </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test05(id, email, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123@gmail.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test05(email, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">asdf@qq.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test05 </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">43241233@qq.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">join</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_12-索引" tabindex="-1">12. 索引 <a class="header-anchor" href="#_12-索引" aria-label="Permalink to &quot;12. 索引&quot;">​</a></h3><p><a href="https://wwi.lanzoup.com/iOkTm09dvc0b" target="_blank" rel="noreferrer">创建海量表.txt</a></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">empno_index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> emp (empno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- empno_index : 表示索引名称</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- on emp(empno) : 表示在 emp 表的 empno 字段 创建索引</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>主键索引 : 主键在创建时, 自动成为主索引 (类型 primary key) <ul><li>create table t1(id int primary key, name varchar(32));</li><li>id 既是主键, 也是索引, 称为 主索引;</li></ul></li><li>唯一索引 : 使用了 unique 的字段, 自动成为 唯一索引; <ul><li>create table t1(id int unique, name varchar(32));</li><li>id 既是唯一的, 也是索引, 称为 unique 索引</li></ul></li><li>普通索引 : 在一个字段中, 专门指定其为索引; <ul><li>create index ename_index on emp(ename);</li></ul></li><li>全文索引 : mysql 自带的, 一般不会使用</li></ul></div></div><p>:::note</p><ul><li>创建索引可以大大减少查询时间;</li><li>查询速度的提升只对创建了索引的字段有效, 对表中的其他字段无效;</li><li>索引会占用一定的存储空间;</li><li>在数据添加, 修改, 删除时, 索引对齐效率有影响;</li></ul><hr><ul><li>较频繁作为查询条件的字段 应该创建索引;</li><li>唯一性太差的字段 不适合单独创建索引;</li><li>更新较为频繁的字段不适合创建索引;</li><li>不会出现在 where 子句中的字段 不该创建索引; :::</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 添加索引前 2.246s 添加索引后 0.007s</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ename_index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> emp(ename);</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sToObQ</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 索引的 增, 删, 改, 查</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建测试表</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test06</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, tname </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查看 表索引</span></span>
<span class="line"><span style="color:#A6ACCD;">show indexes </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test06;</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test06;</span></span>
<span class="line"><span style="color:#A6ACCD;">show keys </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test06;</span></span>
<span class="line"><span style="color:#A6ACCD;">________________________________________________________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加主键索引 (创建表时没有 添加主键 时可以使用)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 如果创建表时指定了主键, 则主键自动成为主键索引</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> test06 </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;"> (tname);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加 唯一索引</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">unique index</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">id_index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> test06(id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加普通索引</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tname_index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> test06(tname);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加普通索引</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> test06 </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> tname_index(tname);</span></span>
<span class="line"><span style="color:#A6ACCD;">________________________________________________________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除索引</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> id_index </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> test06;</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> tname_index </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> test06;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除 主键索引</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> test06 </span><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 索引的修改 : 先删除, 再重新添加;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="案例-数据库创建" tabindex="-1">案例 - 数据库创建 <a class="header-anchor" href="#案例-数据库创建" aria-label="Permalink to &quot;案例 - 数据库创建&quot;">​</a></h2><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 数据库创建</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 要求 客户名不为空, 邮箱不重复, 单价 在 1.0 ~ 9999.99 之间</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建数据库</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">shop_db</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">character</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> utf8 </span><span style="color:#C792EA;">collate</span><span style="color:#A6ACCD;"> utf8_bin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建 商品表 goods, 商品号 goods_id, 商品名 goods_name, 单价 unitprice, 商品类别 category, 供应商 provider</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">goods</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	goods_id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	goods_name </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	unitprice </span><span style="color:#C792EA;">decimal</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">check</span><span style="color:#A6ACCD;">(unitprice </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> unitprice </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">10000</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	category </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">provider</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建 客户表 customer, 客户id crstomer_id, 姓名 name, 地址 address, 邮箱 email, 性别 sex, 身份证 card_id</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">customer</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	customer_id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">address</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">)</span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	email </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">64</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	sex enum(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">男</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">女</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;">, 	</span><span style="color:#676E95;font-style:italic;">-- 枚举类型</span></span>
<span class="line"><span style="color:#A6ACCD;">	card_id </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">unique</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建 订单表 purchase, 订单号 order_id, 客户号 customer_id, 商品号 goods_id, 购买数量 nums</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">purchase</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">	order_id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> unsigned </span><span style="color:#C792EA;">primary key</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	customer_id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	goods_id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	nums </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">not null</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (customer_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> customer(customer_id),</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (goods_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> goods(goods_id));</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="五-mysql-事务" tabindex="-1">五.MySQL 事务 <a class="header-anchor" href="#五-mysql-事务" aria-label="Permalink to &quot;五.MySQL 事务&quot;">​</a></h2><blockquote><p>事务用于保证数据的一致性, 它由 一组相关的 dml 语言组成, 该组的 dml 语言幺妹全部成功, 要么全部失败,</p></blockquote><p>:::note 事务和锁: 当执行事务操作时 ( dml 语言 ), mysql 会在表上加锁, 防止其他用户改表的数据; 主要针对的是 MySQL 的增, 删, 改 :::</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>MySQL 数据库 控制台事务的几个重要操作:</p><ul><li>start transaction : 开始一个事务; <ul><li>set autocommit = off : 也可以开启一个事务</li></ul></li><li>savepoint : 保存点名, 设置保存点; <ul><li>用于取消部分事务, 当事务结束时, 自动删除该事务所定义的所有保存点;</li></ul></li><li>rollback to : 保存点名, 回退事务;</li><li>rollback : 回退全部事务;</li><li>commit : 提交事务, 所有的操作生效, 不能回退 <ul><li>执行 commit 语句后, 会提交数据, 不能在回退, 结束事务, 删除保存点, 释放锁; :::</li></ul></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>细节:</p><ul><li>如果不开始事务, 默认情况下, dml 操作是自动提交的, 不能回滚;</li><li>如果开启一个事务, 没有设置保存点, 则默认回退到 事务开始的状态;</li><li>一个事务中 可以创建多个 保存点, 事务在没有提交前, 可以回退到任何保存点;</li><li>innodb 存储引擎可以使用 事务, myisam 引擎不能使用事务;</li></ul></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test06</span><span style="color:#A6ACCD;"> (id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">32</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 开启事务</span></span>
<span class="line"><span style="color:#F78C6C;">start transaction</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test06 </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tom</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加保存点</span></span>
<span class="line"><span style="color:#A6ACCD;">savepoint a;</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> test06 </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">200</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jack</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加保存点</span></span>
<span class="line"><span style="color:#A6ACCD;">savepoint b;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> test06;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 回退到 a 保存点</span></span>
<span class="line"><span style="color:#F78C6C;">rollback</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> a;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 回退全部</span></span>
<span class="line"><span style="color:#F78C6C;">rollback</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 提交事务</span></span>
<span class="line"><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="事务的隔离基本" tabindex="-1">事务的隔离基本 <a class="header-anchor" href="#事务的隔离基本" aria-label="Permalink to &quot;事务的隔离基本&quot;">​</a></h3><blockquote><p>多个连接开启各自事务操作数据时,数据库系统要负责隔离操作, 以保证各个连接在获取数据时的准确性;</p></blockquote><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>脏读 : 当一个事务读取另一个事务尚未提交的修改时, 产生脏读;</li><li>不可重复读 : 同一查询在同一事务中多次进行, 由于其他提交事务所做的修改或删除, 每次返回不同的结果集, 此时发生不可重复读;</li><li>幻读 : 同一查询在同一事务中多次进行, 由于其他提交事务所做的插入操作, 每次返回不同的结果集;</li></ul></div><p>隔离级别:</p><table><thead><tr><th>MySQL 隔离级别</th><th>脏读</th><th>不可重复读</th><th>幻读</th><th>加锁读</th></tr></thead><tbody><tr><td>读未提交 (Read uncommitted)</td><td>√</td><td>√</td><td>√</td><td>不加锁</td></tr><tr><td>读已提交 (Read committed)</td><td>×</td><td>√</td><td>√</td><td>不加锁</td></tr><tr><td>可重复读 (Repeatable read) 默认</td><td>×</td><td>×</td><td>×</td><td>不加锁</td></tr><tr><td>可串行化 (Serializable)</td><td>×</td><td>×</td><td>×</td><td>加锁</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>MySQL 默认的事务级别为 repeatable read ( 可重复读), 一般情况下, 没有特殊要求, 没必要修改;</p></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 查询当前会话隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @@tx_isolation;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查看系统当前隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @@global.tx_isolation;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 设置当前会话隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">transaction</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">isolation</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">level</span><span style="color:#A6ACCD;"> xxx;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 设置系统当前隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">transaction</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">isolation</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">level</span><span style="color:#A6ACCD;"> xxx;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>:::note 事务的 acid 特性:</p><ul><li>原子性 (Atomicity) : 原子性是指事务是一个不可分割的工作单位, 事务中的操作要么都发生,要么都不发生;</li><li>一致性 (Consistency) : 事务必须使数据库中一个一致性状态变换到另一个一致性状态;</li><li>隔离性 (lsolation) : 多个用户并发访问数据库时, 数据库为每个用户开启的事务,不能被其他事务的操作数据所干扰,多个并发事务之间要相互隔离;</li><li>持久性 (Duralility) : 一个事务一旦被提交,他对数据库中数据的改变时永久性的, 即使数据库发生故障,也不应该对其有影响; :::</li></ul><h2 id="六-表类型和存储引擎" tabindex="-1">六.表类型和存储引擎 <a class="header-anchor" href="#六-表类型和存储引擎" aria-label="Permalink to &quot;六.表类型和存储引擎&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><ul><li>MySQL 的表类型用 存储引擎 (Storage Engines) 决定; <ul><li>主要包括: MyISAM, innoDB, Memory 等;</li></ul></li><li>MySQL 数据表主要支持六中类型: <ul><li>CSV, Memory, ARCHIVE, MRG MYSIAM, MYISAM, lnnoBDB;</li></ul></li><li>六中类型又分为两类: <ul><li>事务安全型 : 如 lnnoDB;</li><li>非事务安全型 : 如: mysiam, menory; :::</li></ul></li></ul><p>:::note 细节说明:</p><ul><li>MyISAM : 不支持事务, 也不支持外键, 但访问速度快, 对事务完整性没有要求;</li><li>InnoDB : 提供了具有提交, 回滚, 崩溃恢复能力的安全事务; <ul><li>和 myisam 相比, 处理效率差一些并占用更多的磁盘空间以保留数据和索引;</li></ul></li><li>MEMORY : 使用从头打内存中的内容来创建表, 每个 memory 表只实际对应一个磁盘文件; <ul><li>访问非常快, 它的数据放在内存中, 并且默认使用 hash 索引;</li><li>一旦服务关闭, 数据会全部丢失, 表结构还在; :::</li></ul></li></ul><h2 id="七-视图" tabindex="-1">七.视图 <a class="header-anchor" href="#七-视图" aria-label="Permalink to &quot;七.视图&quot;">​</a></h2><blockquote><p>视图 : 根据基表, 创建的一个虚拟表, 他实际没有数据, 只有结构文件;</p></blockquote><p>:::note</p><ul><li>视图是根据基表(可以是多个基表)来创建的;</li><li>视图是虚拟表;</li><li>通过视图可以修改基表的数据;</li><li>基表的改变, 也会影响到视图的数据;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 创建视图</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">视图名</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 列名 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> 表名 ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改(更新)视图</span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> 视图名 </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> 语句</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查看创建视图的指令</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> view 视图名;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除视图</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> 视图名 </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">, 视图名 </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>作用:</p><ul><li>安全 : 某些字段数据不允许用户直接查看时, 可以创建视图表;</li><li>性能 : 多个关联表查询繁琐时,可以使用视图表;</li><li>灵活 : 旧表不能使用又无法废弃时,可以使用视图表, 已达到升级的目的;</li></ul></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 创建视图表, 可以显示 员工编号,名称,部门名称,薪水等级等 (三表联合查询)</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">view</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">emp_view02</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> empno, ename, dname, grade </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept, emp,salgrade</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> (sal </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> losal </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;">  hisal);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="八-mysql-用户管理" tabindex="-1">八.MySQL 用户管理 <a class="header-anchor" href="#八-mysql-用户管理" aria-label="Permalink to &quot;八.MySQL 用户管理&quot;">​</a></h2><p>:::note MySQL 数据库中的 user 表中存储了数据库的所有用户信息;</p><ul><li>host 字段 存储了可以访问数据库的 ip 地址;</li><li>user 字段 存储了用户名;</li><li>authentication_string 字段存储了 经过 password() 方法加密后的 用户密码; :::</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 创建用户</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">user</span><span style="color:#A6ACCD;"> &#39;</span><span style="color:#82AAFF;">用户名</span><span style="color:#A6ACCD;">&#39;@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">允许登录的位置</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">	identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">密码</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除用户</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">user</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">允许登录的位置</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改自己的密码</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">新密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 修改别人的密码</span></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> for </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">允许登录的位置</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>细节:</p><ul><li>在创建用户时, 如果不指定 host, 则为 %, % 表示所有 ip 都可以连接数据库;</li><li>create user &#39;xxx&#39;@&#39;192.186.1.%&#39; : 表示 xxx 用户在 192.168.1.* 的 ip 都可以登录 mysql</li><li>在删除用户时, 如果 host 不是 %, 则需要明确指定 &#39;用户&#39;@&#39;host 值&#39;;</li></ul></div><h3 id="用户权限" tabindex="-1">用户权限 <a class="header-anchor" href="#用户权限" aria-label="Permalink to &quot;用户权限&quot;">​</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 授予权限</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> 权限列表 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 库.对象名 </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">登录位置</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> [identified by &#39;密码&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 回收权限</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> 权限列表 </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> 库.对象名 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">登录位置</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 权限生效指令 (如果权限没有生效,可使用下面的指令)</span></span>
<span class="line"><span style="color:#A6ACCD;">flush privileges;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>:::note 说明 :</p><ul><li>权限列表, 多个权限用逗号分开 <ul><li>grant select on ...</li><li>grant select, delete, create, on ...</li><li>grant all [privileges] on ... // 表示赋予该用户在该对象上的所有权限</li></ul></li><li><em>.</em> : 表示本系统中的所有数据库的所有对象;</li><li>库.* : 表示某个数据库中的所有对象;</li><li>inentified by : 可以省略不写; <ul><li>写出来, 如果该用户存在, 则修改该用户密码; 如果不存在, 则创建该用户 :::</li></ul></li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 添加用户</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">user</span><span style="color:#A6ACCD;"> &#39;</span><span style="color:#82AAFF;">myroot</span><span style="color:#A6ACCD;">&#39;@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> identified </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 添加权限</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- grant 权限列表 on 库.对象名 to &#39;用户名&#39;@&#39;登录位置&#39; [identified by &#39;密码&#39;]</span></span>
<span class="line"><span style="color:#F78C6C;">grant</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tmp.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myroot</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 回收权限</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- revoke 权限列表 on 库.对象名 from &#39;用户名&#39;@&#39;登录位置&#39;;</span></span>
<span class="line"><span style="color:#F78C6C;">revoke</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tmp.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myroot</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://img.pupper.cn/img/1655720449509-77037d08-2543-42b7-97f3-33ed8c7cc5b8.png" alt=""></p><h2 id="案例-1" tabindex="-1">案例 <a class="header-anchor" href="#案例-1" aria-label="Permalink to &quot;案例&quot;">​</a></h2><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- emp 员工表 (编号 empno, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 3 显示所有部门名称</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> dname </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 显示所有员工年的收入 13 月</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, (sal</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">ifnull</span><span style="color:#A6ACCD;">(comm,</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">13</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">年收入</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 4 工资超过 2850 的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2850</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 工资在 2850 ~ 1500 之间的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2850</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1500</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 编号为 7566 的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> empno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7566</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 10 和 30 号部门, 工资超 1500 的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1500</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 无上级的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> mgr </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 5 在 1991-2-1 和 1991-5-1 之间入职的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, job, hiredate </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> hiredate </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1991-2-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1991-5-1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> hiredate;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 有补助的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, sal, comm </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> comm </span><span style="color:#F78C6C;">is not null</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> sal;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 6 部门 30 的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 所有 工作为 CLERK 的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, empno, deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CLERK</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 佣金高于薪金的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> comm </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> sal;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 佣金高于薪金 60%</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> comm </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> (sal </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 部门 10 的 MANAGER 和 部门 20 的 CLERK</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> (deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CLERK</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 部门 10 的 MANAGER 和 部门 20 的 CLERK 和 既不是 MANAGER 也不是 CLERK 且 工资大于 2000</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> (deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CLERK</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> (job </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CLERK</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2000</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 收取佣金的不同工作</span></span>
<span class="line"><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> comm </span><span style="color:#F78C6C;">is not null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 不收取佣金或佣金少于 100</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> comm </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">or</span><span style="color:#A6ACCD;"> comm </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 每月倒数第三天入职的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> hiredate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (date_sub(last_day(hiredate),interval </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">day</span><span style="color:#A6ACCD;">));</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> hiredate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> last_day(hiredate) </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 早去 12 年前入职的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> date_add(hiredate, interval </span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">year</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 首字母小写</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">concat</span><span style="color:#A6ACCD;">(lcase(</span><span style="color:#82AAFF;">left</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)),</span><span style="color:#82AAFF;">substring</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">ename</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 名字前 5 个字母</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">left</span><span style="color:#A6ACCD;">(ename, </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 名字不包含 R 的员工名字</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#F78C6C;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%R%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 员工名字前三个字符</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">substring</span><span style="color:#A6ACCD;">(ename,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 替换名字 a 替换 A</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">replace</span><span style="color:#A6ACCD;">(ename, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">A</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 入职满 10 年的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, hiredate </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> date_add(hiredate, interval </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">year</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 按名字排序</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> ename;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 按入职年限排序</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> hiredate;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 先按工作排序,再按工资排序</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;">,sal;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 员工姓名,入职年份,月份, 先按月排序,再按年排序</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, </span><span style="color:#82AAFF;">year</span><span style="color:#A6ACCD;">(hiredate), </span><span style="color:#82AAFF;">month</span><span style="color:#A6ACCD;">(hiredate) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">month</span><span style="color:#A6ACCD;">(hiredate),</span><span style="color:#82AAFF;">year</span><span style="color:#A6ACCD;">(hiredate);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 日薪</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">floor</span><span style="color:#A6ACCD;">(sal</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">日薪</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 2 月入职</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">month</span><span style="color:#A6ACCD;">(hiredate) </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 入职天数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">datediff</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, hiredate) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">入职天数</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 员工名字包含 A</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%A%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 日期方式显示入职时间</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> from_days(</span><span style="color:#82AAFF;">datediff</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, hiredate)) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">服务天数</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 7 至少有一个员工的部门</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> dname </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 薪资比 SMITH 多的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SMITH</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 雇佣时间比上级晚的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> emp.ename, emp.hiredate </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp, emp tmps </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> emp.mgr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> tmps.empno </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> emp.hiredate </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> tmps.hiredate;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 部门名称和员工信息,包括没有员工的部门</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> dname, emp.deptno, ename, hiredate </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">left join</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> dname;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 所有 工作为 CLERK 的员工姓名和 部门名称</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, dname, job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept, emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CLERK</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> dname;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 最低薪资大于 1500 的工作</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;">  job, </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(sal) min_sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> min_sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1500</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 在部门 sales 工作的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dname </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sales</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 薪水高于平均工资的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 与 SCOTT 工作相同的员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> ename </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SCOTT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> ename </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SCOTT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 薪水高于 30 号部门所有员工</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> sal </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> deptno </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 每个部门的员工人数, 平均工资, 平均服务年限</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(empno) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">人数</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(sal), </span><span style="color:#82AAFF;">format</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">datediff</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, hiredate)</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">365</span><span style="color:#A6ACCD;">),</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> deptno;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 所有员工的姓名,部门,工资</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, dname, sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept, emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emp.deptno;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 所有部门的详细信息及部门人数</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> dname, </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(dname) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dept, emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept.deptno </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> emp.deptno </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> dname;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 各个工种的最低工资</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> job, </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> job;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--  MANAGER 的最低薪水</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(sal) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MANAGER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 计算年薪,升序排列</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> ename, (sal </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ifnull</span><span style="color:#A6ACCD;">(comm, </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">12</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> year_sal </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> year_sal;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br></div></div>`,205),o=[e];function t(r,c,C,y,i,A){return n(),a("div",null,o)}const b=s(p,[["render",t]]);export{F as __pageData,b as default};
