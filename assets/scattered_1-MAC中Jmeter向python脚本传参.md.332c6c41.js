import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.1b72a0e7.js";const F=JSON.parse('{"title":"一、MAC 中 Jmeter 向 Python 脚本传参","description":"","frontmatter":{},"headers":[],"relativePath":"scattered/1-MAC中Jmeter向python脚本传参.md","lastUpdated":1699924178000}'),e={name:"scattered/1-MAC中Jmeter向python脚本传参.md"},p=l(`<h1 id="一、mac-中-jmeter-向-python-脚本传参" tabindex="-1">一、MAC 中 Jmeter 向 Python 脚本传参 <a class="header-anchor" href="#一、mac-中-jmeter-向-python-脚本传参" aria-label="Permalink to &quot;一、MAC 中 Jmeter 向 Python 脚本传参&quot;">​</a></h1><h2 id="_1-确定-python-版本" tabindex="-1">1. 确定 python 版本 <a class="header-anchor" href="#_1-确定-python-版本" aria-label="Permalink to &quot;1. 确定 python 版本&quot;">​</a></h2><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># python2 版本</span></span>
<span class="line"><span style="color:#FFCB6B;">python</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># python3 版本</span></span>
<span class="line"><span style="color:#FFCB6B;">python3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://img.pupper.cn/img/20220730105643.png" alt=""></p><h2 id="_2-创建-python-脚本" tabindex="-1">2. 创建 python 脚本 <a class="header-anchor" href="#_2-创建-python-脚本" aria-label="Permalink to &quot;2. 创建 python 脚本&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Python 中 sys.argv 的用法解释：<strong>sys.argv</strong> 可以让 python 脚本从程序外部获取参数</p><ul><li>sys.argv 是一个列表，可用<code>[]</code>提取其中的元素， <ul><li>其第一个元素是程序本身，随后才依次是外部给予的参数，可以接受多个参数，每个参数用空格隔开即可。</li><li>获取外部传入的元素从 <strong>变量名[1]</strong> 开始获取</li></ul></li></ul></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>脚本中 <code>print()</code> 的内容都可被 jmeter 接收，可以在 jmeter 中使用正则表达式提取器对相关参数进行提取。</p></div><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># test.py</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># sys 用于获取外部传入的参数</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> sys</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> hashlib</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">loginMd5</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">username</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">password</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">	res </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getMd5</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">username</span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;">password</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># print 用于将处理后的参数传给 jmeter</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">md5</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> res</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getMd5</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">	md5 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> hashlib</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">md5</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">	md5</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">encode</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> md5</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hexdigest</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">loginMd5</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">argv</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">],</span><span style="color:#82AAFF;"> sys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">argv</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_3-创建脚本文件" tabindex="-1">3. 创建脚本文件 <a class="header-anchor" href="#_3-创建脚本文件" aria-label="Permalink to &quot;3. 创建脚本文件&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>$1 $2 : 表示将 2 个参数传递给 python 文件 ( 或者使用 $1 $1 也是表示传两个参数 ) 。</p></div><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># shell.sh</span></span>
<span class="line"><span style="color:#FFCB6B;">python3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/Users/xxx/Documents/AutomatedTesting/jmeter/test.py</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">$1</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">$2</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><ul><li><p>Mac 系统后缀名为 <code>.sh</code> 文件， windows 系统后缀名为 <code>.bat</code> 文件</p></li><li><p>Mac 传输的 python 脚本的占位符为 <code>$</code>，windows 占位符为 <code>%</code></p></li></ul></div><h2 id="_4-jmeter-获取传参给-python-脚本" tabindex="-1">4. jmeter 获取传参给 python 脚本 <a class="header-anchor" href="#_4-jmeter-获取传参给-python-脚本" aria-label="Permalink to &quot;4. jmeter 获取传参给 python 脚本&quot;">​</a></h2><h3 id="_1-获取-csv-文件数据" tabindex="-1">1. 获取 csv 文件数据 <a class="header-anchor" href="#_1-获取-csv-文件数据" aria-label="Permalink to &quot;1. 获取 csv 文件数据&quot;">​</a></h3><p><img src="https://img.pupper.cn/img/image-20220730112701146.png" alt="image-20220730112701146"></p><h3 id="_2-使用-os-进程提取器-向-python-脚本传参" tabindex="-1">2. 使用 OS 进程提取器 向 python 脚本传参 <a class="header-anchor" href="#_2-使用-os-进程提取器-向-python-脚本传参" aria-label="Permalink to &quot;2. 使用 OS 进程提取器 向 python 脚本传参&quot;">​</a></h3><p><img src="https://img.pupper.cn/img/image-20220730113134712.png" alt="image-20220730113134712"></p><h2 id="_5-使用-正则表达式提取器-获取-python-打印的数据" tabindex="-1">5. 使用 正则表达式提取器 获取 python 打印的数据 <a class="header-anchor" href="#_5-使用-正则表达式提取器-获取-python-打印的数据" aria-label="Permalink to &quot;5. 使用 正则表达式提取器 获取 python 打印的数据&quot;">​</a></h2><p><img src="https://img.pupper.cn/img/image-20220730114127345.png" alt="image-20220730114127345"></p><h2 id="_6-运行-jmeter-脚本即可查看加密后的数据" tabindex="-1">6. 运行 jmeter 脚本即可查看加密后的数据 <a class="header-anchor" href="#_6-运行-jmeter-脚本即可查看加密后的数据" aria-label="Permalink to &quot;6. 运行 jmeter 脚本即可查看加密后的数据&quot;">​</a></h2><p><img src="https://img.pupper.cn/img/image-20220730115448345.png" alt="image-20220730115448345"></p><h2 id="问题解答" tabindex="-1">问题解答 <a class="header-anchor" href="#问题解答" aria-label="Permalink to &quot;问题解答&quot;">​</a></h2><h3 id="_1-运行时提示没有文件权限" tabindex="-1">1. 运行时提示没有文件权限 <a class="header-anchor" href="#_1-运行时提示没有文件权限" aria-label="Permalink to &quot;1. 运行时提示没有文件权限&quot;">​</a></h3><p><img src="https://img.pupper.cn/img/image-20220730114600409.png" alt="image-20220730114600409"></p><h4 id="解决办法-给-sh-脚本赋予权限-需要输入-电脑-密码" tabindex="-1">解决办法: 给 <code>.sh</code> 脚本赋予权限, 需要输入 电脑 密码 <a class="header-anchor" href="#解决办法-给-sh-脚本赋予权限-需要输入-电脑-密码" aria-label="Permalink to &quot;解决办法: 给 \`.sh\` 脚本赋予权限, 需要输入 电脑 密码&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">777</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/Users/xxx/Documents/AutomatedTesting/jmeter/shell.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/image-20220730115055482.png" alt="image-20220730115055482"></p>`,27),o=[p];function t(r,c,i,y,h,m){return a(),n("div",null,o)}const u=s(e,[["render",t]]);export{F as __pageData,u as default};
