import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.1b72a0e7.js";const A=JSON.parse('{"title":"六、PySide2","description":"","frontmatter":{},"headers":[],"relativePath":"软件测试/测试工具开发/GUI-PySide2.md","lastUpdated":1699957240000}'),p={name:"软件测试/测试工具开发/GUI-PySide2.md"},e=l(`<h1 id="六、pyside2" tabindex="-1">六、PySide2 <a class="header-anchor" href="#六、pyside2" aria-label="Permalink to &quot;六、PySide2&quot;">​</a></h1><h2 id="一、pyside2-、-pyqt5-简介" tabindex="-1">一、PySide2 、 PyQt5 简介 <a class="header-anchor" href="#一、pyside2-、-pyqt5-简介" aria-label="Permalink to &quot;一、PySide2 、 PyQt5 简介&quot;">​</a></h2><p>PySide2、PyQt5 都是基于著名的 Qt 库。</p><p>Qt 库里面有非常强大的图形界面开发库，但是 Qt 库是 C++语言开发的，PySide2、PyQt5 可以让我们通过 Python 语言使用 Qt。</p><p>PySide2 是 Qt 的 <code>亲儿子</code> ， PyQt5 是 Qt 还没有亲儿子之前的收的 <code>义子</code> （Riverbank Computing 这个公司开发的）。</p><p>那为什么 PyQt5 这个义子 反而比 PySide2 这个亲儿子更出名呢？</p><p>原因很简单：PySide2 这亲儿子最近（2018 年 7 月）才出生。</p><h2 id="二、-pyside2-安装" tabindex="-1">二、 PySide2 安装 <a class="header-anchor" href="#二、-pyside2-安装" aria-label="Permalink to &quot;二、 PySide2 安装&quot;">​</a></h2><div class="language-os line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">os</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">pip install pyside2</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>网络比较慢，可以指定国内的安装源，下载安装。</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">pip install pyside2 -i https://pypi.douban.com/simple/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Qt 官方网站声明了： <code>Windows上 Python 3.8.0</code> 调用 Qt 5.14 ， 会有问题。</p><p>有类似下面这样的导入错误</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ImportError: Dll load failed while importing shiboken2: 找不到指定的程序</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>所以， <code>就是不能用 Python 3.8.0</code> ，请使用 3.8.1 或者以后的版本， Python 3.7 也可以。</p></div><h2 id="三、-qt-designer" tabindex="-1">三、 Qt Designer <a class="header-anchor" href="#三、-qt-designer" aria-label="Permalink to &quot;三、 Qt Designer&quot;">​</a></h2><p>我们可以用 QT 界面生成器 <code>Qt Designer</code> ，拖拖拽拽就可以直观的创建出程序大体的界面。</p><p>Windows 下，运行 Python 安装目录下 <code>Scripts\\pyside2-designer.exe</code> 这个可执行文件</p><p>通过 Qt Designer 设计的界面，最终是保存在一个 ui 文件中的。</p><h3 id="_1-pycharm-快速打开-designer" tabindex="-1">1.Pycharm 快速打开 Designer <a class="header-anchor" href="#_1-pycharm-快速打开-designer" aria-label="Permalink to &quot;1.Pycharm 快速打开 Designer&quot;">​</a></h3><p>程序：<code>D:\\python\\Lib\\site-packages\\PySide2\\designer.exe</code></p><p>工作目录：<code>$FileDir$</code></p><p><img src="https://img.pupper.cn/img/20220725183126.png" alt=""></p><p>文件夹 <strong>右键</strong> 点击可以快速打开 <strong>Designer</strong> ， 编辑保存后再该目录可以生成一个 <code>.ui</code> 的文件。</p><p><img src="https://img.pupper.cn/img/20220725183153.png" alt=""></p><h2 id="四、ui-文件加载" tabindex="-1">四、UI 文件加载 <a class="header-anchor" href="#四、ui-文件加载" aria-label="Permalink to &quot;四、UI 文件加载&quot;">​</a></h2><h3 id="_1-动态加载" tabindex="-1">1.动态加载 <a class="header-anchor" href="#_1-动态加载" aria-label="Permalink to &quot;1.动态加载&quot;">​</a></h3><p>我们的 Python 程序就可以从文件中加载 UI 定义，并且动态 创建一个相应的窗口对象</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 1.应用对象</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> PySide2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">QtWidgets </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> QApplication</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2.界面UI 文件需要导入代码里</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> PySide2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">QtUiTools </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> QUiLoader</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3.导入读取UI文件的库</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> PySide2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">QtCore </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> QFile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 4.创建一个应用对象</span></span>
<span class="line"><span style="color:#A6ACCD;">app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QApplication</span><span style="color:#89DDFF;">([])</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 5.获取 UI 文件</span></span>
<span class="line"><span style="color:#A6ACCD;">qFile </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QFile</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">登录系统.ui</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 6.打开 UI 文件</span></span>
<span class="line"><span style="color:#A6ACCD;">qFile</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">open</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">QFile</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ReadOnly</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 7.加载 UI 对象</span></span>
<span class="line"><span style="color:#A6ACCD;">ui </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QUiLoader</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">load</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">qFile</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 8.关闭 UI 文件</span></span>
<span class="line"><span style="color:#A6ACCD;">qFile</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 9.显示 UI</span></span>
<span class="line"><span style="color:#A6ACCD;">ui</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">show</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 10.运行对象</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exec_</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_2-转化-ui-文件为-python-代码" tabindex="-1">2.转化 UI 文件为 Python 代码 <a class="header-anchor" href="#_2-转化-ui-文件为-python-代码" aria-label="Permalink to &quot;2.转化 UI 文件为 Python 代码&quot;">​</a></h3><p>执行如下的命令 把 UI 文件直接转化为包含界面定义的 Python 代码文件</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">pyside2</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">uic main</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ui</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> ui_main</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>然后在你的代码文件中这样使用定义界面的类</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> PySide2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">QtWidgets </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> QApplication</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">QMainWindow</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> ui_main </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Ui_MainWindow</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MainWindow</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">QMainWindow</span><span style="color:#89DDFF;">):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">super</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># 使用ui文件导入定义界面类</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ui</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Ui_MainWindow</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># 初始化界面</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ui</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setupUi</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># 使用界面定义的控件，也是从ui里面访问</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ui</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">webview</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">load</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://www.baidu.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">QApplication</span><span style="color:#89DDFF;">([])</span></span>
<span class="line"><span style="color:#A6ACCD;">mainw </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MainWindow</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">mainw</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">show</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exec_</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div>`,31),o=[e];function t(r,c,i,y,D,F){return n(),a("div",null,o)}const b=s(p,[["render",t]]);export{A as __pageData,b as default};
