import{_ as a,o as s,c as e,Q as n}from"./chunks/framework.1b72a0e7.js";const g=JSON.parse('{"title":"三、Jmeter 安装及配置服务器监控","description":"","frontmatter":{},"headers":[],"relativePath":"软件测试/性能测试/Jmeter安装及服务器监控.md","lastUpdated":1699957240000}'),l={name:"软件测试/性能测试/Jmeter安装及服务器监控.md"},p=n(`<h1 id="三、jmeter-安装及配置服务器监控" tabindex="-1">三、Jmeter 安装及配置服务器监控 <a class="header-anchor" href="#三、jmeter-安装及配置服务器监控" aria-label="Permalink to &quot;三、Jmeter 安装及配置服务器监控&quot;">​</a></h1><h2 id="一-java-环境配置" tabindex="-1">一. JAVA 环境配置 <a class="header-anchor" href="#一-java-环境配置" aria-label="Permalink to &quot;一. JAVA 环境配置&quot;">​</a></h2><h3 id="_1-验证-java-环境是否安装" tabindex="-1">1. 验证 Java 环境是否安装 <a class="header-anchor" href="#_1-验证-java-环境是否安装" aria-label="Permalink to &quot;1. 验证 Java 环境是否安装&quot;">​</a></h3><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">java</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/20220802104141.png" alt=""></p><h3 id="_2-mac-java-安装" tabindex="-1">2.MAC JAVA 安装 <a class="header-anchor" href="#_2-mac-java-安装" aria-label="Permalink to &quot;2.MAC JAVA 安装&quot;">​</a></h3><p><a href="https://www.oracle.com/java/technologies/downloads/#java11-mac" target="_blank" rel="noreferrer">JAVA 官网下载地址</a> <a href="https://www.oracle.com/java/technologies/downloads/#java11-mac" target="_blank" rel="noreferrer">https://www.oracle.com/java/technologies/downloads/#java11-mac</a><img src="https://img.pupper.cn/img/20220802105211.png" alt=""></p><p><img src="https://img.pupper.cn/img/20220802105617.png" alt=""></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 查看 Java 是否安装成功</span></span>
<span class="line"><span style="color:#FFCB6B;">java</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看 Java 安装路径</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/libexec/java_home</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-V</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://img.pupper.cn/img/20220802110426.png" alt=""></p><h3 id="_3-环境配置" tabindex="-1">3.环境配置 <a class="header-anchor" href="#_3-环境配置" aria-label="Permalink to &quot;3.环境配置&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>第一次配置环境变量，需要创建一个 <code>.bash_profil</code> 的隐藏配置文件</p></div><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">touch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.bash_profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用一下命令打开配置文件</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">open</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.bash_profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在配置文件中输入一下环境变量</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>JAVA_HOME 的地址需要更换为 上一步 查找的地址</p></div><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/jdk-11.0.14.jdk/Contents/Home&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">CLASS_PATH=&quot;$JAVA_HOME/lib&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH=&quot;.$PATH:$JAVA_HOME/bin&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">export JAVA_HOME</span></span>
<span class="line"><span style="color:#A6ACCD;">export PATH</span></span>
<span class="line"><span style="color:#A6ACCD;">export CLASS_PATH</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>保存关闭文件后, 在 终端 输入一下代码, 重新加载配置文件</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.bash_profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在 终端 输入 <code>echo $JAVA_HOME</code> ,消失路径则表示 配置完成</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> $JAVA_HOME</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/20220802112532.png" alt=""></p><h2 id="二-jmeter-安装" tabindex="-1">二. Jmeter 安装 <a class="header-anchor" href="#二-jmeter-安装" aria-label="Permalink to &quot;二. Jmeter 安装&quot;">​</a></h2><h3 id="_1-下载-jmeter" tabindex="-1">1. 下载 Jmeter <a class="header-anchor" href="#_1-下载-jmeter" aria-label="Permalink to &quot;1. 下载 Jmeter&quot;">​</a></h3><p><a href="https://jmeter.apache.org/download_jmeter.cgi" target="_blank" rel="noreferrer">jmeter 官网下载地址</a><img src="https://img.pupper.cn/img/20220802114515.png" alt=""></p><p>将下载的 压缩包 解压 <img src="https://img.pupper.cn/img/20220802115005.png" alt=""></p><h3 id="_2-配置-jmeter" tabindex="-1">2. 配置 Jmeter <a class="header-anchor" href="#_2-配置-jmeter" aria-label="Permalink to &quot;2. 配置 Jmeter&quot;">​</a></h3><p>打开配置文件, 将以下代码添加到配置文件中</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">open</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.bash_profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>JMETER_HOME 的路径为 你解压的 jmeter 路径</p></div><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">export JMETER_HOME=/Users/chengqiande/Applications/apache-jmeter-5.5</span></span>
<span class="line"><span style="color:#A6ACCD;">export PATH=$JAVA_HOME/bin:$PATH:.:$JMETER_HOME/bin:$PATH</span></span>
<span class="line"><span style="color:#A6ACCD;">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JMETER_HOME/lib/ext/ApacheJMeter_core.jar:$JMETER_HOME/lib/jorphan.jar:$JMETER_HOME/lib/logkit-2.0.jar</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>保存关闭配置文件,使用 <code>source .bash_profile</code> 重新加载配置文件</p><p>在 终端中输入 <code>jmeter</code> 即可开启 jmeter 程序 <img src="https://img.pupper.cn/img/20220802115757.png" alt=""><img src="https://img.pupper.cn/img/20220802115814.png" alt=""></p><h3 id="_3-jmeter-语言更改" tabindex="-1">3. jmeter 语言更改 <a class="header-anchor" href="#_3-jmeter-语言更改" aria-label="Permalink to &quot;3. jmeter 语言更改&quot;">​</a></h3><p>在 jmeter 目录中的 bin 文件夹中 找到 <code>jmeter.properties</code> 文件, 使用 记事本打开 <img src="https://img.pupper.cn/img/20220802115923.png" alt=""></p><p>查找 <code>language</code> 关键字,然后添加如下代码</p><div class="language-properties line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">language</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">zh_CN</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/20220802120525.png" alt=""></p><p>保存关闭文件,重启 jmeter 即可为中文</p><p><img src="https://img.pupper.cn/img/20220802120637.png" alt=""></p><h2 id="三-插件管理器-安装" tabindex="-1">三.插件管理器 安装 <a class="header-anchor" href="#三-插件管理器-安装" aria-label="Permalink to &quot;三.插件管理器 安装&quot;">​</a></h2><p><a href="https://jmeter-plugins.org/install/Install/" target="_blank" rel="noreferrer">插件管理器 - 下载地址</a></p><p>::: theorem VuePress 下载 plugins-manager.jar 并放入 lib/ext 目录，然后重启 JMeter。 ::: right 来自 <a href="https://jmeter-plugins.org/install/Install/" target="_blank" rel="noreferrer">jmeter-plugins 官网</a> :::</p><p><img src="https://img.pupper.cn/img/20220802144222.png" alt=""><img src="https://img.pupper.cn/img/20220802144726.png" alt=""> 重启 jmeter 后, 在 <strong>选项</strong> 菜单中会出现 <strong>Plugins Manager</strong> 选项 <img src="https://img.pupper.cn/img/20220802144916.png" alt=""></p><h2 id="四-jmeter-插件-安装" tabindex="-1">四. jmeter 插件 安装 <a class="header-anchor" href="#四-jmeter-插件-安装" aria-label="Permalink to &quot;四. jmeter 插件 安装&quot;">​</a></h2><p>打开插件管理器, 在 <strong>Available Plugins</strong> 中搜索 <code>Standard Set</code> 进行安装, 安装插件后会 自动重启</p><p><img src="https://img.pupper.cn/img/20220802164240.png" alt=""></p><p>点击线程即可添加 监控 <img src="https://img.pupper.cn/img/20220802164911.png" alt=""></p><h2 id="五-服务器监控-插件" tabindex="-1">五. 服务器监控 插件 <a class="header-anchor" href="#五-服务器监控-插件" aria-label="Permalink to &quot;五. 服务器监控 插件&quot;">​</a></h2><h3 id="_1-安装插件" tabindex="-1">1. 安装插件 <a class="header-anchor" href="#_1-安装插件" aria-label="Permalink to &quot;1. 安装插件&quot;">​</a></h3><p><a href="https://github.com/undera/perfmon-agent/releases/tag/2.2.3" target="_blank" rel="noreferrer">下载 ServerAgent 文件</a></p><h4 id="在服务器中创建-jmeter-文件夹-将-serveragent-压缩包上传到文件夹下" tabindex="-1">在服务器中创建 jmeter 文件夹, 将 ServerAgent 压缩包上传到文件夹下 <a class="header-anchor" href="#在服务器中创建-jmeter-文件夹-将-serveragent-压缩包上传到文件夹下" aria-label="Permalink to &quot;在服务器中创建 jmeter 文件夹, 将 ServerAgent 压缩包上传到文件夹下&quot;">​</a></h4><p><img src="https://img.pupper.cn/img/20220804094513.png" alt=""></p><h4 id="使用以下命令将-serveragent-压缩包-解压" tabindex="-1">使用以下命令将 ServerAgent 压缩包 解压 <a class="header-anchor" href="#使用以下命令将-serveragent-压缩包-解压" aria-label="Permalink to &quot;使用以下命令将 ServerAgent 压缩包 解压&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">unzip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ServerAgent-2.2.3.zip</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/20220804094824.png" alt=""></p><h4 id="修改-serveragent-2-2-3-文件夹-权限" tabindex="-1">修改 ServerAgent-2.2.3 文件夹 权限 <a class="header-anchor" href="#修改-serveragent-2-2-3-文件夹-权限" aria-label="Permalink to &quot;修改 ServerAgent-2.2.3 文件夹 权限&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">777</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ServerAgent-2.2.3</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/20220804095351.png" alt=""></p><h3 id="_2-运行服务" tabindex="-1">2. 运行服务 <a class="header-anchor" href="#_2-运行服务" aria-label="Permalink to &quot;2. 运行服务&quot;">​</a></h3><h4 id="查看-4444-端口是否被占用" tabindex="-1">查看 4444 端口是否被占用 <a class="header-anchor" href="#查看-4444-端口是否被占用" aria-label="Permalink to &quot;查看 4444 端口是否被占用&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">lsof</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i:4444</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="修改-startagent-端口" tabindex="-1">修改 startAgent 端口 <a class="header-anchor" href="#修改-startagent-端口" aria-label="Permalink to &quot;修改 startAgent 端口&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/startAgent.sh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--tcp-port</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9501</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--udp-port</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9501</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--sysinfo</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="修改-startagent-sh-运行脚本" tabindex="-1">修改 <code>startAgent.sh</code> 运行脚本 <a class="header-anchor" href="#修改-startagent-sh-运行脚本" aria-label="Permalink to &quot;修改 \`startAgent.sh\` 运行脚本&quot;">​</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在脚本末尾添加 <code>&amp;</code> 符号, 使脚本可以后台运行</p><ul><li><code>vi startAgent.sh</code> 打开脚本</li><li><code>:wq</code> 保存脚本并退出</li></ul></div><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">java</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-jar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">dirname</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;font-style:italic;">$0</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">/CMDRunner.jar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--tool</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PerfMonAgent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;font-style:italic;">$@</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="运行脚本" tabindex="-1">运行脚本 <a class="header-anchor" href="#运行脚本" aria-label="Permalink to &quot;运行脚本&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/startAgent.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="查看服务是否允许" tabindex="-1">查看服务是否允许 <a class="header-anchor" href="#查看服务是否允许" aria-label="Permalink to &quot;查看服务是否允许&quot;">​</a></h4><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-aux</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CMD</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/20220804173804.png" alt=""></p><h2 id="六-jmeter-连接-服务器监控" tabindex="-1">六. jmeter 连接 服务器监控 <a class="header-anchor" href="#六-jmeter-连接-服务器监控" aria-label="Permalink to &quot;六. jmeter 连接 服务器监控&quot;">​</a></h2><p><img src="https://img.pupper.cn/img/20220804174328.png" alt=""></p><p><img src="https://img.pupper.cn/img/20220804174237.png" alt=""></p>`,76),r=[p];function t(o,i,c,d,m,h){return s(),e("div",null,r)}const b=a(l,[["render",t]]);export{g as __pageData,b as default};
