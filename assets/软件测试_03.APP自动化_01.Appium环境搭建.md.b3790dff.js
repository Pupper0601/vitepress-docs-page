import{_ as a,o as s,c as e,Q as p}from"./chunks/framework.1b72a0e7.js";const b=JSON.parse('{"title":"Appium 环境搭建","description":"","frontmatter":{},"headers":[],"relativePath":"软件测试/03.APP自动化/01.Appium环境搭建.md","lastUpdated":1705907257000}'),n={name:"软件测试/03.APP自动化/01.Appium环境搭建.md"},l=p(`<h1 id="appium-环境搭建" tabindex="-1">Appium 环境搭建 <a class="header-anchor" href="#appium-环境搭建" aria-label="Permalink to &quot;Appium 环境搭建&quot;">​</a></h1><h2 id="一、-appium" tabindex="-1">一、 appium <a class="header-anchor" href="#一、-appium" aria-label="Permalink to &quot;一、 appium&quot;">​</a></h2><h3 id="_1-appium-介绍" tabindex="-1">1. appium 介绍 <a class="header-anchor" href="#_1-appium-介绍" aria-label="Permalink to &quot;1. appium 介绍&quot;">​</a></h3><p><code>appium</code> 是一个自动化测试开源工具，支持 iOS 平台和 Android 平台上的原生应用，web 应用和混合应用。</p><ul><li><strong>原生应用</strong> ： 指那些用 iOS 或者 Android SDK 写的应用（ Application 简称 app）。</li><li><strong>web 应用</strong> ： 指使用移动浏览器访问的应用（ appium 支持 iOS 上的 Safari 和 Android 上的 Chrome）。</li><li><strong>混合应用</strong> ： 指原生代码封装网页视图——原生代码和 web 内容交互。</li></ul><blockquote><p>appium 是一个跨平台的工具：它允许测试人员在不同的平台（ iOS，Android）使用同一套 API 来写自动化测试脚本，这样大大增加了 iOS 和 Android 测试套件间代码的复用性。</p></blockquote><h5 id="客户端、服务器架构" tabindex="-1">客户端、服务器架构 <a class="header-anchor" href="#客户端、服务器架构" aria-label="Permalink to &quot;客户端、服务器架构&quot;">​</a></h5><ul><li>appium 的核心是一个 web 服务器</li><li>他接受来自客户端的连接，监听命令并在移动应用上执行，答复 http 响应来描述执行结果</li></ul><h5 id="session" tabindex="-1">session <a class="header-anchor" href="#session" aria-label="Permalink to &quot;session&quot;">​</a></h5><ul><li>自动化始终在一个会话中执行，客户端会给服务器发送请求</li><li>请求中包含一个被称作预期能力的 json 对象，这时候服务器会开启这个自动化会话</li><li>并返回一个用于后续发送命令的 id</li></ul><h5 id="预期能力" tabindex="-1">预期能力 <a class="header-anchor" href="#预期能力" aria-label="Permalink to &quot;预期能力&quot;">​</a></h5><ul><li>是一些发送给 appium 服务的键值对组合，</li><li>他告诉服务器，我们想要启动什么类型的自动化会话</li><li>可以修改服务器在自动化过程中的行为。比如：将 platforName 设置为 Android</li></ul><h5 id="appium-服务器" tabindex="-1">appium 服务器： <a class="header-anchor" href="#appium-服务器" aria-label="Permalink to &quot;appium 服务器：&quot;">​</a></h5><ul><li>是一个 node.js 编写的</li></ul><h5 id="appium-客户端" tabindex="-1">appium 客户端 <a class="header-anchor" href="#appium-客户端" aria-label="Permalink to &quot;appium 客户端&quot;">​</a></h5><ul><li>我们写的代码</li></ul><h5 id="appium-desktop" tabindex="-1">appium Desktop <a class="header-anchor" href="#appium-desktop" aria-label="Permalink to &quot;appium Desktop&quot;">​</a></h5><ul><li>他打包了 appium 服务器运行需要的所有东西，还可以查看应用程序的结构树--元素定位</li></ul><h3 id="_2-appium-工作原理" tabindex="-1">2. appium 工作原理 <a class="header-anchor" href="#_2-appium-工作原理" aria-label="Permalink to &quot;2. appium 工作原理&quot;">​</a></h3><p><img src="https://img.pupper.cn/img/20210819144424.png" alt=""></p><p>Appium 支持 Android 及 iOS 平台的 App 测试，两者的运行原理大体相同。</p><h4 id="_1-android-平台" tabindex="-1">1. Android 平台 <a class="header-anchor" href="#_1-android-平台" aria-label="Permalink to &quot;1. Android 平台&quot;">​</a></h4><ul><li>由 Client 发起请求，经过中间服务套件，驱动 App 执行相关的操作。 <ul><li>Client 是测试人员开发的 WebDriver 测试脚本，也就是你我写的代码。</li></ul></li><li>中间服务套件则是 Appium 解析服务， <ul><li>Appium 在服务端启用 4723 端口，通过该端口实现 Client 与 Appium Server 通信。</li><li>Appium Server 把请求转发给中间件 Bootstrap.jar</li><li>Bootstrap.jar 安装在手机上，监听 4724 端口并接收 Appium 命令，</li><li>通过调用 UIAutomator 命令来实现测试过程。</li></ul></li><li>Bootstrap 将执行的结果返回给 Appium Server。 <ul><li>Appium Server 再将结果返回给 Client。</li></ul></li></ul><h4 id="_2-ios-平台" tabindex="-1">2. ios 平台 <a class="header-anchor" href="#_2-ios-平台" aria-label="Permalink to &quot;2. ios 平台&quot;">​</a></h4><ul><li>由 Client 发起请求，经过中间服务套件，驱动 App 执行相关的操作 <ul><li>Client 是测试人员开发的 Webdriver 测试脚本。</li></ul></li><li>中间服务套件则是 Appium 解析服务 <ul><li>Appium 在服务端启用 4723 端口，通过该端口实现 Client 与 Appium Server 通信。</li><li>Appium Server 调用 instruments.js 启动一个 Socket Server，同时分出一个⼦进程运⾏ instruments.app</li><li>将 bootstrap.js（一个 UIAutomation 脚本）注入到设备从而与外界进行交互。</li></ul></li><li>Bootstrap.js 将执行的结果返回给 Appium Server <ul><li>Appium Server 再将结果返回给 Client。</li></ul></li></ul><blockquote><p>Android 与 iOS 区别在于 Appium 将请求转发到 <code>bootstrap.js</code> 或者 <code>bootstrap.jar.</code></p><p>然后由 bootstrap 驱动 UIAutomation 或 UIAutomator 去设备上完成具体的动作。</p></blockquote><h2 id="二、-appium-环境搭建" tabindex="-1">二、 Appium 环境搭建 <a class="header-anchor" href="#二、-appium-环境搭建" aria-label="Permalink to &quot;二、 Appium 环境搭建&quot;">​</a></h2><h3 id="_1-安装-node-js" tabindex="-1">1. 安装 Node.js <a class="header-anchor" href="#_1-安装-node-js" aria-label="Permalink to &quot;1. 安装 Node.js&quot;">​</a></h3><p>Appium 服务端运行时依赖 node.js 环境，因此需要优先安装 node 环境。</p><p><a href="https://nodejs.org/zh-cn/" target="_blank" rel="noreferrer">Node.js 下载地址</a> ： <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noreferrer">https://nodejs.org/zh-cn/</a></p><p><img src="https://img.pupper.cn/img/20210819152603.png" alt="image-20210819152603141"></p><p><strong><em>安装路径不要有中文</em></strong></p><p>安装好后，使用 <code>node -v</code> 检查</p><p><img src="https://img.pupper.cn/img/20210819152856.png" alt="image-20210819152855857"></p><h3 id="_2-安装-jdk-及-配置环境变量" tabindex="-1">2. 安装 JDK 及 配置环境变量 <a class="header-anchor" href="#_2-安装-jdk-及-配置环境变量" aria-label="Permalink to &quot;2. 安装 JDK 及 配置环境变量&quot;">​</a></h3><h4 id="_1-安装-jdk" tabindex="-1">1. 安装 JDK <a class="header-anchor" href="#_1-安装-jdk" aria-label="Permalink to &quot;1. 安装 JDK&quot;">​</a></h4><p><a href="https://www.oracle.com/cn/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noreferrer">JDK 官网下载</a> : <a href="https://www.oracle.com/cn/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noreferrer">https://www.oracle.com/cn/java/technologies/javase/javase-jdk8-downloads.html</a></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/AdoptOpenJDK/8/" target="_blank" rel="noreferrer">JDK 下载 --- 清华大学开源软件镜像站</a> : <a href="https://mirrors.tuna.tsinghua.edu.cn/AdoptOpenJDK/8/" target="_blank" rel="noreferrer">https://mirrors.tuna.tsinghua.edu.cn/AdoptOpenJDK/8/</a></p><p><img src="https://img.pupper.cn/img/20210819155401.png" alt="image-20210819155400901"></p><p><strong>默认地址安装 --- 安装路径不要有中文</strong></p><p>安装完成后使用 <code>java</code> 和 <code>javac</code> 进行验证</p><p><img src="https://img.pupper.cn/img/20210819155559.png" alt="image-20210819155559175"></p><p><img src="https://img.pupper.cn/img/20210819155626.png" alt="image-20210819155626411"></p><h4 id="_2-配置环境变量" tabindex="-1">2. 配置环境变量 <a class="header-anchor" href="#_2-配置环境变量" aria-label="Permalink to &quot;2. 配置环境变量&quot;">​</a></h4><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">JAVA_HOME</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Program</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Files</span><span style="color:#A6ACCD;">\\J</span><span style="color:#C3E88D;">ava</span><span style="color:#A6ACCD;">\\j</span><span style="color:#C3E88D;">dk1.8.0_191</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://img.pupper.cn/img/20210819160950.png" alt="image-20210819160950557"></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">CLASSPATH</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">C:\\Program Files\\Java\\jdk1.8.0_191\\lib\\tools.jar</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://img.pupper.cn/img/20210819161256.png" alt="image-20210819161255901"></p><p>在 path 中配置 <code>jdk</code> 和 <code>jre</code></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">C:\\Program</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Files</span><span style="color:#A6ACCD;">\\J</span><span style="color:#C3E88D;">ava</span><span style="color:#A6ACCD;">\\j</span><span style="color:#C3E88D;">dk1.8.0_191</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">in</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Program</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Files</span><span style="color:#A6ACCD;">\\J</span><span style="color:#C3E88D;">ava</span><span style="color:#A6ACCD;">\\j</span><span style="color:#C3E88D;">dk1.8.0_191</span><span style="color:#A6ACCD;">\\j</span><span style="color:#C3E88D;">re</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">in</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://img.pupper.cn/img/20210819162051.png" alt="image-20210819162051736"></p><h4 id="_3-mac-环境配置" tabindex="-1">3. mac 环境配置 <a class="header-anchor" href="#_3-mac-环境配置" aria-label="Permalink to &quot;3. mac 环境配置&quot;">​</a></h4><p>打开终端，打开 profile 文件（需要输入密码）</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="https://img.pupper.cn/img/20210819172911.png" alt="image-20210819172910926"></p><p>在文件末尾添加在文件末尾添加 JAVA_HOME 路径（切换英文输入法，键入“i”，进入插入模式）：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">JAVA_HOME</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/Library/Java/JavaVirtualMachines/jdk9.0.1.jdk/Contents/Home/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">CLASS_PATH</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$JAVA_HOME</span><span style="color:#C3E88D;">/lib</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.:</span><span style="color:#A6ACCD;">$PATH</span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;">$JAVA_HOME</span><span style="color:#C3E88D;">/bin</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><code>E45: &#39;readonly&#39; option is set (add ! to override)</code></p><p>如果无法保存, 可使用 <code>qw!</code> 强制保存</p></div><p>里面 jdk-9.0.1.jdk，是一个文件夹，根据你安装的 JDK 版本，具体查看方式：打开 Finder，快捷键 “Command +shift + G”，输入/Library/Java/JavaVirtualMachines/，单击回车，就可以看到。</p><h3 id="_3-安装-sdk-及-配置环境变量" tabindex="-1">3. 安装 SDK 及 配置环境变量 <a class="header-anchor" href="#_3-安装-sdk-及-配置环境变量" aria-label="Permalink to &quot;3. 安装 SDK 及 配置环境变量&quot;">​</a></h3><h4 id="_1-安装-sdk" tabindex="-1">1. 安装 SDK <a class="header-anchor" href="#_1-安装-sdk" aria-label="Permalink to &quot;1. 安装 SDK&quot;">​</a></h4><p><a href="https://www.androiddevtools.cn/" target="_blank" rel="noreferrer">SDK 下载地址</a> : <a href="https://www.androiddevtools.cn/" target="_blank" rel="noreferrer">https://www.androiddevtools.cn/</a></p><p><img src="https://img.pupper.cn/img/20210819164752.png" alt="image-20210819164752259"></p><p>安装路径不能有中文</p><p><img src="https://img.pupper.cn/img/20210819165714.png" alt="image-20210819165713929"></p><h4 id="_2-配置环境变量-1" tabindex="-1">2. 配置环境变量 <a class="header-anchor" href="#_2-配置环境变量-1" aria-label="Permalink to &quot;2. 配置环境变量&quot;">​</a></h4><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ANDROID_HOME</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Program</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Files</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">x86</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">\\A</span><span style="color:#C3E88D;">ndroid</span><span style="color:#A6ACCD;">\\a</span><span style="color:#C3E88D;">ndorid-sdk</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://img.pupper.cn/img/20210819170031.png" alt="image-20210819170031335"></p><p>在 <code>path</code> 中配置</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">%</span><span style="color:#FFCB6B;">ANDROID_HOME%\\tools</span></span>
<span class="line"><span style="color:#A6ACCD;">%</span><span style="color:#FFCB6B;">ANDROID_HOME%\\platform-tools</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://img.pupper.cn/img/20210819170427.png" alt="image-20210819170427547"></p><p>安装后，使用 <code>adb version</code> 进行验证</p><p><img src="https://img.pupper.cn/img/20210819170938.png" alt="image-20210819170938640"></p><h4 id="_3-mac-环境变量配置" tabindex="-1">3. MAC 环境变量配置 <a class="header-anchor" href="#_3-mac-环境变量配置" aria-label="Permalink to &quot;3. MAC 环境变量配置&quot;">​</a></h4><p>在终端中输入 vim .bash_profile，打开配置文件后，在文件末尾添加以下 2 行</p><p>问号部分要改成你自己电脑的家目录名称</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">PATH</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">$PATH</span><span style="color:#C3E88D;">:/Users/???/Library/Android/sdk/tools</span></span>
<span class="line"><span style="color:#A6ACCD;">PATH</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">$PATH</span><span style="color:#C3E88D;">:/Users/???/Library/Android/sdk/platform-tools</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>保存后，在终端执行 source .bash_profile</p><p>使用 <code>adb version</code> 检查环境</p><h3 id="_4-安装-appium-图形应用" tabindex="-1">4. 安装 appium 图形应用 <a class="header-anchor" href="#_4-安装-appium-图形应用" aria-label="Permalink to &quot;4. 安装 appium 图形应用&quot;">​</a></h3><p><a href="https://github.com/appium/appium-desktop/releases" target="_blank" rel="noreferrer">appium 下载地址</a> : <a href="http://appium.io/" target="_blank" rel="noreferrer">http://appium.io/</a></p><p><img src="https://img.pupper.cn/img/20210819172036.png" alt="image-20210819172036291"></p><h3 id="_5-安装-appium-python-client-库" tabindex="-1">5. 安装 Appium-Python-Client 库 <a class="header-anchor" href="#_5-安装-appium-python-client-库" aria-label="Permalink to &quot;5. 安装 Appium-Python-Client 库&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Appium-Python-Client</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,84),i=[l];function r(o,t,c,d,u,m){return s(),e("div",null,i)}const A=a(n,[["render",r]]);export{b as __pageData,A as default};
