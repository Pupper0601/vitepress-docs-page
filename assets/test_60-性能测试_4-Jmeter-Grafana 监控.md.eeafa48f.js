import{_ as a,o as s,c as e,Q as n}from"./chunks/framework.1b72a0e7.js";const y=JSON.parse('{"title":"四、Jmeter Grafana 监控","description":"","frontmatter":{},"headers":[],"relativePath":"test/60-性能测试/4-Jmeter-Grafana 监控.md","lastUpdated":1699522503000}'),o={name:"test/60-性能测试/4-Jmeter-Grafana 监控.md"},l=n(`<h1 id="四、jmeter-grafana-监控" tabindex="-1">四、Jmeter Grafana 监控 <a class="header-anchor" href="#四、jmeter-grafana-监控" aria-label="Permalink to &quot;四、Jmeter Grafana 监控&quot;">​</a></h1><h2 id="一、数据收集-exporter" tabindex="-1">一、数据收集 (Exporter) <a class="header-anchor" href="#一、数据收集-exporter" aria-label="Permalink to &quot;一、数据收集 (Exporter)&quot;">​</a></h2><blockquote><p><code>exporter</code> 是 prometheus 一类数据采集组件的总称, 他负责从目标处收集数据, 并转换为 prometheus 支持的格式 <code>node_exporter</code> 是一种比较主流的服务器性能指标采集工具, 默认端口为 9100 <code>mysql_exporter</code> 用于收集 MySQL 数据库的各项指标, 默认端口为 9104</p></blockquote><h3 id="_1-下载-exporter" tabindex="-1">1. 下载 Exporter <a class="header-anchor" href="#_1-下载-exporter" aria-label="Permalink to &quot;1. 下载 Exporter&quot;">​</a></h3><p><a href="https://www.cnblogs.com/momoyan/p/11520755.html" target="_blank" rel="noreferrer">常用的 Exporter 下载</a></p><p><mark>nohup</mark> 静默启动, <mark>2&gt;&amp;1</mark> 不显示 <mark>nohup</mark> 时的报错信息, &amp; 允许后台运行</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/node_exporter</span></span>
<span class="line"><span style="color:#FFCB6B;">nohup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./node_exporter</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">/dev/null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">2&gt;&amp;1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="二、保存数据-prometheus-普罗米修斯" tabindex="-1">二、保存数据 (Prometheus 普罗米修斯) <a class="header-anchor" href="#二、保存数据-prometheus-普罗米修斯" aria-label="Permalink to &quot;二、保存数据 (Prometheus 普罗米修斯)&quot;">​</a></h2><blockquote><p><code>Prometheus</code>: 是一款开源的监控报警系统与时序数据库, 默认端口为 9090 对时间精度要求较高, 如果服务器时间与现实时间不同步, 可能无法收集到准确的数据.</p></blockquote><p>时间校准命令:</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ntpdate</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ntp.aliyun.com</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果提示没有 <code>没有 ntpdate 命令</code>, 则使用以下命令进行安装</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ntp</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>与 Exporter 或 sql 关联, 在 <code>/usr/local/prometheus/prometheus.yml</code> 中修改</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># node_exporter 关联</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">job_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">agent</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">static_configs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">targets</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost:9100</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><code>localhost</code> 可以修改为实际需要关联的服务器</p></div><h2 id="三、展示数据-grafana" tabindex="-1">三、展示数据 (Grafana) <a class="header-anchor" href="#三、展示数据-grafana" aria-label="Permalink to &quot;三、展示数据 (Grafana)&quot;">​</a></h2><blockquote><p><code>Grafana</code> 是一个开源的, 可视化监控工具; 可以配合 <code>Prometheus</code> 与 <code>node_exporter</code> 配合监控服务器</p></blockquote><p><a href="https://www.aliyundrive.com/s/s9TB8WonvR4" target="_blank" rel="noreferrer">Grafana 模板下载</a></p><h3 id="_1-登录-grafana-默认账号密码为-admin" tabindex="-1">1.登录 Grafana , 默认账号密码为 <code>admin</code> <a class="header-anchor" href="#_1-登录-grafana-默认账号密码为-admin" aria-label="Permalink to &quot;1.登录 Grafana , 默认账号密码为 \`admin\`&quot;">​</a></h3><p><img src="https://img.pupper.cn/img/20220820165401.png" alt=""></p><p><img src="https://img.pupper.cn/img/20220820165710.png" alt=""></p><h3 id="_2-关联-prometheus" tabindex="-1">2.关联 Prometheus <a class="header-anchor" href="#_2-关联-prometheus" aria-label="Permalink to &quot;2.关联 Prometheus&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>URL 尽量写全路径, 防止关联失败</p></div><h3 id="_3-添加监控模板" tabindex="-1">3. 添加监控模板 <a class="header-anchor" href="#_3-添加监控模板" aria-label="Permalink to &quot;3. 添加监控模板&quot;">​</a></h3>`,25),r=[l];function p(t,c,i,d,m,h){return s(),e("div",null,r)}const b=a(o,[["render",p]]);export{y as __pageData,b as default};
